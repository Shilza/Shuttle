(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1214:function(e,t,a){"use strict";var n=a(1),o=a.n(n),r=a(1216),c=a.n(r);t.a=function(e){var t=e.children,a=e.icon,n=e.text;return o.a.createElement("div",{className:c.a.sectionContainer},o.a.createElement("div",{className:c.a.iconContainer},a),o.a.createElement("span",{className:c.a.sectionLabel},n),t)}},1216:function(e,t,a){e.exports={sectionContainer:"explainingLabels_sectionContainer__1n9BX",iconContainer:"explainingLabels_iconContainer__1r1N2",sectionLabel:"explainingLabels_sectionLabel__Jgmvz"}},1219:function(e,t,a){e.exports={savedContainer:"saved_savedContainer__y-Us1",compilationsLabel:"saved_compilationsLabel__1wb4t",bookmark:"saved_bookmark__avPGL",compilationsList:"saved_compilationsList__1VM87",compilationContainer:"saved_compilationContainer__16YX-",compilationName:"saved_compilationName__3Glkp",media:"saved_media__3-GjK",singlePic:"saved_singlePic__X9n1c saved_media__3-GjK"}},1220:function(e,t,a){e.exports={postControl:"postControl_postControl__3eel1",header:"postControl_header__1o37E",avatar:"postControl_avatar__HUt5X",usernameLocation:"postControl_usernameLocation__aItYL",username:"postControl_username__8AufT",location:"postControl_location__Xi7f2",caption:"postControl_caption__3hGVS",captionUsername:"postControl_captionUsername__1GUu0",footer:"postControl_footer__3qMex",commentInputContainer:"postControl_commentInputContainer__2b6RN",commentInput:"postControl_commentInput__1D-D-",commentsList:"postControl_commentsList__AFrQs",submitButton:"postControl_submitButton__18lBU",loader:"postControl_loader__Vmi6L"}},1221:function(e,t,a){"use strict";var n=a(1),o=a.n(n),r=a(1248),c=a.n(r);t.a=function(e){var t=e.children;return o.a.createElement("ul",{className:c.a.container},t)}},1223:function(e,t,a){"use strict";var n=a(22),o=a(50),r=a(1),c=a.n(r),i=function(e){var t=e.loadMoreButton,a=void 0===t?c.a.createElement("button",null,"Load more"):t,i=e.loader,s=void 0===i?c.a.createElement("span",null,"loading..."):i,l=e.threshold,u=void 0===l?200:l,m=e.toBottom,d=void 0!==m&&m,_=e.byWindow,p=e.fetcher,v=e.withScrollHandler,f=e.getScrollParent,b=e.className,E=e.children,h=Object(o.a)(e,["loadMoreButton","loader","threshold","toBottom","byWindow","fetcher","withScrollHandler","getScrollParent","className","children"]),C=Object(r.useState)({isFetching:!1,page:0,lastPage:0}),k=Object(n.a)(C,2),g=k[0],O=g.isFetching,N=g.page,j=g.lastPage,y=k[1],S=Object(r.useRef)(null),M=N<j;Object(r.useEffect)(function(){y({isFetching:!0});var e=p(N+1);e instanceof Promise?e.then(function(e){var t=e.page,a=e.lastPage;y({isFetching:!1,page:t,lastPage:a}),"boolean"===typeof d&&d&&"function"===typeof S.current.scrollTo?S.current&&S.current.scrollTo(0,S.current.scrollHeight):d&&d.current&&"function"===typeof d.current.scrollTo&&d.current.scrollTo(0,d.current.scrollHeight)}):y({isFetching:!1}),"undefined"!==typeof f&&f(S)},[]);var B=function(){M&&(y({isFetching:!0}),p(N+1).then(function(e){var t=e.page,a=e.lastPage;y({isFetching:!1,page:t,lastPage:a})}))};return c.a.createElement("div",Object.assign({ref:S,className:b,onScroll:function(){var e=_?window.scrollY-u:S.current.scrollTop;v&&!O&&M&&e-u<=0&&B()}},h),M&&!v&&!O&&c.a.cloneElement(a,{onClick:B}),O&&s,E)};a.d(t,"a",function(){return i})},1225:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return c});var n=a(18),o=a(19),r=function(e){return n.a.get("".concat(o.a.dialogs,"?page=").concat(e))},c=function(e,t){return n.a.get("".concat(o.a.dialogs,"/").concat(e,"?page=").concat(t))}},1230:function(e,t,a){"use strict";var n=a(22),o=a(1),r=a.n(o),c=a(37),i=a(1218),s=a(330),l=a(360),u=a(132),m=a(1266),d=(a(1267),a(536)),_=a(1299),p=a.n(_),v=function(e){var t=e.media,a=e.toggleMuted,n=e.fullWidth,o=e.muted,c=e.autoPlay;return r.a.createElement("div",{className:p.a.mediaContainer},t.match(".mp4")?r.a.createElement(d.a,{src:t,autoPlay:c,muted:o,toggleMuted:a}):r.a.createElement(m.LazyLoadImage,{src:t,alt:"User media",wrapperClassName:n?p.a.fullWidthMedia:p.a.media,effect:"blur"}))};v.defaultProps={autoPlay:!1,fullWidth:!1};var f=r.a.memo(v),b=(a(574),a(519)),E=(a(246),a(131)),h=a(1215),C=a.n(h),k=a(1446),g=a(1263),O=(a(571),a(358)),N=(a(59),a(17)),j=a(1277),y=a(1268),S=a.n(y),M=Object(c.b)(function(e){return{postId:e.saved.postToBeSaved&&e.saved.postToBeSaved.id}})(function(e){var t=e.compilation,a=e.dispatch,c=e.postId,i=Object(o.useState)(!1),s=Object(n.a)(i,2),l=s[0],u=s[1],m=r.a.createElement(N.a,{type:"loading",style:{fontSize:24},spin:!0});return r.a.createElement(O.a,{spinning:l,indicator:m},r.a.createElement("div",{className:S.a.compilation,onClick:function(e){return function(e,t){e.stopPropagation(),u(!0),a.posts.saveAsync({post_id:c,compilation:t}).then(function(){return u(!1)})}(e,Object.keys(t)[0])}},r.a.createElement(j.a,{compilation:t})))}),B=a(1269),w=a.n(B),I=Object(c.b)(function(e){return{compilations:e.saved.compilations}})(function(e){var t=e.dispatch,a=e.compilations;return Object(o.useEffect)(function(){t.saved.fetchCompilations(1)},[]),r.a.createElement("div",{className:w.a.compilationsList},a&&(0===a.length?r.a.createElement(g.a,{text:"Here will displayed your photos compilations"}):a.map(function(e,t){return r.a.createElement(M,{key:t,compilation:e})})))}),x=a(1303),L=a.n(x),T=Object(c.b)()(function(e){var t=e.dispatch;return r.a.createElement("div",{className:L.a.drawerTitle},r.a.createElement("span",null,"Compilations"),r.a.createElement(N.a,{type:"plus",className:L.a.icon,onClick:function(){return t.saved.setIsModalOpen(!0)}}))}),A=(a(570),a(247)),P=a(353),D=a(95),F=function(e){var t=e.getFieldDecorator,a=e.className,n=e.fieldName,o=void 0===n?"compilationName":n,c=e.initialValue,i=void 0===c?"":c;return r.a.createElement(D.a,null,t(o,{rules:[{required:!0,message:"Name is required!"},{max:12,message:"Name must be less than 12 characters!"},{pattern:/^[a-z0-9]+$/,message:"Invalid name"}],initialValue:i})(r.a.createElement("input",{className:a,placeholder:"name"})))},R=Object(c.b)(function(e){return{postId:e.saved.postToBeSaved&&e.saved.postToBeSaved.id,postSrc:e.saved.postToBeSaved&&e.saved.postToBeSaved.src}})(A.a.create()(function(e){var t=e.dispatch,a=e.form,c=e.postId,i=e.postSrc,s=Object(o.useState)(!1),l=Object(n.a)(s,2),u=l[0],m=l[1],d=function(){t.saved.setIsModalOpen(!1)};return r.a.createElement(P.a,{onClose:d,zIndex:10001,visible:!0},r.a.createElement("div",{className:S.a.modalContainer},r.a.createElement("div",{className:S.a.title},"New Compilation"),r.a.createElement("div",{className:S.a.modalBody},r.a.createElement("img",{src:i,alt:"Compilation cover"}),r.a.createElement(A.a,{onSubmit:function(e){e.preventDefault(),a.validateFields(function(e,a){var n=a.compilationName;e||(m(!0),t.posts.saveAsync({post_id:c,compilation:n}).then(d))})},className:S.a.modalBody},r.a.createElement(F,{className:S.a.compilationName,getFieldDecorator:a.getFieldDecorator}),r.a.createElement(E.a,{type:"primary",htmlType:"submit",loading:u},"Save")))))})),z=a(1305),U=a.n(z),W=Object(c.b)(function(e){return{isModalOpen:e.saved.isModalOpen,username:e.auth.user.username}})(function(e){var t=e.dispatch,a=e.isModalOpen,c=e.showBar,i=e.isVideo,s=e.username,l=Object(o.useState)(!1),u=Object(n.a)(l,2),m=u[0],d=u[1];Object(o.useEffect)(function(){c||_()},[c]);var _=function(){d(!1),t.saved.setPostToBeSaved(void 0)};return r.a.createElement(C.a,{transitionName:U.a,transitionAppear:!1,transitionLeave:!0,transitionEnter:!0,transitionEnterTimeout:400,transitionLeaveTimeout:400,className:i?"":w.a.transitionContainer},c&&r.a.createElement("div",{className:i?w.a.staticSaveBar:w.a.saveBar},r.a.createElement("button",{className:i?w.a.staticButtonLink:w.a.buttonLink,onClick:function(){d(!0),t.saved.setIsSavedTimeout(!1)}},"Choose compilation"),r.a.createElement(k.a,{to:"/".concat(s)},r.a.createElement(E.a,{size:"small"},"See compilations"))),r.a.createElement(b.a,{height:"90%",title:r.a.createElement(T,null),placement:"bottom",visible:m,closable:!1,zIndex:1e4,onClose:_},r.a.createElement("div",{className:w.a.compilationsContainer},r.a.createElement(I,null),r.a.createElement(E.a,{size:"small",onClick:_},"Cancel")),a&&r.a.createElement(R,null)))}),Y=a(362),G=a(1307),H=a.n(G),V=function(e){var t=e.media,a=e.showBar,c=e.marks,m=e.closeModal,d=e.fullWidth,_=e.muted,p=e.autoPlay,v=!!t.match(".mp4"),b=Object(o.useState)(!1),E=Object(n.a)(b,2),h=E[0],C=E[1],k=Object(o.useState)(!0),g=Object(n.a)(k,2),O=g[0],N=g[1],j=Object(o.useRef)(null);Object(o.useEffect)(function(){v&&(j.current=setTimeout(function(){N(!1)},2e3))},[]);var y=function(){C(!1)},S=function(){v&&(N(!0),clearInterval(j.current),j.current=setTimeout(function(){N(!1)},2e3))};return r.a.createElement("div",{className:H.a.container,onMouseMove:S,onMouseOver:S},r.a.createElement(f,{media:t,autoPlay:p,muted:_,fullWidth:d}),r.a.createElement(W,{showBar:a,isVideo:v}),!a&&c&&c.length>0&&r.a.createElement(r.a.Fragment,null,O&&r.a.createElement("button",{onClick:h?y:function(){C(!0)},className:v?H.a.showMarksButtonVideo:H.a.showMarksButton},h?"Hide marks":"Show marks"),h&&!v&&c.map(function(e){return r.a.createElement(s.a,{key:e.id,mark:e,onClick:m,link:!0})}),Object(u.a)()?r.a.createElement(i.a,{visible:h&&v,placement:"bottom",onClose:y,zIndex:1e4,height:"min-content",className:H.a.drawer},r.a.createElement(Y.a,{users:c,className:H.a.mobileMarkedUsersContainer,closeModal:m})):r.a.createElement(l.a,{visible:h&&v,onClose:y},r.a.createElement("div",{className:H.a.computerMarksContainer},r.a.createElement(Y.a,{users:c,className:H.a.markedUsersContainer,onClickUser:m})))))};V.defaultProps={autoPlay:!1,fullWidth:!1};var X=Object(c.b)(function(e,t){return{showBar:(e.saved.postToBeSaved?e.saved.postToBeSaved.id:void 0)===t.postId}})(V);a.d(t,"a",function(){return X})},1232:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"a",function(){return c}),a.d(t,"d",function(){return i}),a.d(t,"c",function(){return s});var n=a(18),o=a(19),r=function(e,t){return n.a.get("".concat(o.a.comments,"?post_id=").concat(e,"&page=").concat(t))},c=function(e){return n.a.post(o.a.comments,e)},i=function(e){return n.a.delete("".concat(o.a.comments,"?id=").concat(e))},s=function(e,t){return n.a.get("".concat(o.a.comments,"/likes?comment_id=").concat(e,"&page=").concat(t))}},1233:function(e,t,a){"use strict";var n=a(1221);a.d(t,"a",function(){return n.a})},1235:function(e,t,a){"use strict";var n=a(13),o=a(26),r=a(22),c=a(1),i=a(1232),s=a(91);t.a=function(e,t){var a=Object(c.useState)([]),l=Object(r.a)(a,2),u=l[0],m=l[1],d=Object(c.useCallback)(function(e){e&&m([].concat(Object(o.a)(u),[e]))},[u]),_=Object(c.useCallback)(function(e){m(u.filter(function(t){return t.id!==e}))},[u]),p=Object(c.useCallback)(function(e){var t=e.id,a=e.liked;m(u.map(function(e){return e.id===t?(e.isLiked=a,a?++e.likes_count:--e.likes_count,Object(n.a)({},e)):e}))},[u]);return{comments:u,fetchComments:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(t>0)return i.b(e,a).then(function(e){var t=e.data;return Array.isArray(t.data)&&m([].concat(Object(o.a)(Object(s.a)(t.data).reverse()),Object(o.a)(u))),t})},onComment:d,onCommentRemove:_,setCommentLiked:p}}},1238:function(e,t,a){"use strict";var n=a(1),o=a.n(n),r=a(37),c=a(27),i=a.n(c),s=a(107),l=a(1310),u=a.n(l),m=Object(r.b)()(function(e){var t=e.post,a=e.dispatch;return o.a.createElement("div",{className:u.a.save,role:"button"},t.isSaved?o.a.createElement("div",{className:u.a.bookmarkSolid,onClick:function(){return a.posts.removeSavedPost(t.id)}}):o.a.createElement("div",{className:u.a.bookmarkFlat,onClick:function(){a.saved.setPostToBeSaved(t),a.saved.setIsSavedTimeout(!0),function(e,t){var a;return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];var c=this;clearTimeout(a),a=setTimeout(function(){return e.apply(c,o)},t)}}(function(e){var t=e.getState().saved;t.isSavedTimeout&&t.postToBeSaved&&a.posts.saveAsync({post_id:t.postToBeSaved.id})},5e3)(s.a)}}))}),d=a(22),_=a(1218),p=a(132),v=a(526),f=a.n(v),b=a(353),E=a(224),h=a(1247),C=a(359),k=a(0),g=a.n(k),O=a(1312),N=a.n(O),j=function(e){var t=e.src,a=e.onInputChange;return o.a.createElement("div",{className:N.a.container},t.match(".mp4")?o.a.createElement("video",{src:t,className:N.a.media}):o.a.createElement("img",{className:N.a.media,src:t,alt:"Post"}),o.a.createElement("input",{className:N.a.input,onChange:a,placeholder:"Write message..."}))};j.ptopTypes={src:g.a.string.isRequired,onInputChange:g.a.func.isRequired};var y=j,S=a(196),M=a(94),B=a(1314),w=a.n(B),I=function(e){var t=e.id,a=e.username,r=e.avatar,c=e.send,i=Object(n.useState)(!1),s=Object(d.a)(i,2),l=s[0],u=s[1];return o.a.createElement("li",{className:w.a.container},r?o.a.createElement("img",{className:w.a.avatar,src:r,alt:"".concat(a,"'s avatar")}):o.a.createElement(M.a,{fontSize:"18px",className:w.a.avatar}),o.a.createElement("div",{className:w.a.info},o.a.createElement("span",{className:w.a.username},a)),l?o.a.createElement("button",{className:w.a.sentButton},"Sent"):o.a.createElement("button",{className:w.a.sendButton,onClick:function(){c(t),u(!0)}},"Send"))},x=a(1316),L=a.n(x),T=o.a.memo(function(e){var t=e.users,a=e.fetcher,n=e.send,r=function(){return o.a.createElement("ul",{className:Object(p.a)()?L.a.mobileContainer:L.a.container},t.map(function(e){return o.a.createElement(I,{key:e.id,avatar:e.avatar,username:e.username,id:e.id,send:n})}))};return o.a.createElement(o.a.Fragment,null,a?o.a.createElement(S.a,{fetcher:a},r()):o.a.createElement(o.a.Fragment,null,r()))}),A=a(1318),P=a.n(A),D=Object(r.b)(function(e){return{myId:e.auth.user.id}})(function(e){var t=e.src,a=e.myId,r=e.close,c=e.dispatch,i=Object(n.useState)(""),s=Object(d.a)(i,2),l=s[0],u=s[1],m=Object(n.useState)(!1),_=Object(d.a)(m,2),v=_[0],f=_[1],b=Object(n.useState)(null),k=Object(d.a)(b,2),g=k[0],O=k[1],N=Object(h.a)(),j=N.dialogs,S=N.privateSearch,M=N.fetchDialogs;Object(n.useEffect)(function(){M()},[]);var B,w=Object(n.useMemo)(function(){return t.split("/")[3].split(".")[0]},[t]),I=Object(n.useCallback)(function(e){u(e.target.value)},[]);return o.a.createElement("div",{className:Object(p.a)()?P.a.mobileContainer:P.a.container,style:{paddingBottom:v&&"46px"}},o.a.createElement(y,{src:t,onInputChange:I}),o.a.createElement(E.a,{search:function(e){e.length>0?O(function(){return function(t){return S(e,t)}}):(S(e,0),O(null))},className:P.a.search}),o.a.createElement(T,{users:(B=j,B.map(function(e){return e.user?e.user:e})),postCode:w,fetcher:g,send:function(e){var t=C.a.getSubscription("dialogs:".concat(a));t.emit("message",{type:C.c.MESSAGE,receiverId:e,message:"".concat(window.location.origin,"/p/").concat(w)}),l.length>0&&l.length<1e3&&t.emit("message",{type:C.c.MESSAGE,receiverId:e,message:l}),f(!0),c.auth.readDialog(e)}}),v&&o.a.createElement("button",{className:P.a.doneButton,onClick:function(){r()}},"Done"))}),F=a(1320),R=a.n(F),z=o.a.memo(function(e){var t=e.src,a=e.className,r=Object(n.useState)(!1),c=Object(d.a)(r,2),i=c[0],s=c[1],l=function(){s(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"".concat(R.a.button," ").concat(a),onClick:function(){s(!0)}},o.a.createElement("img",{src:f.a,alt:"Share post",className:R.a.plane})),Object(p.a)()?o.a.createElement(_.a,{onClose:l,visible:i,placement:"bottom",height:"90%",className:R.a.drawer},o.a.createElement(D,{src:t,close:l})):o.a.createElement(b.a,{visible:i,onClose:l},o.a.createElement("div",{className:R.a.bodyWrapper},o.a.createElement(D,{src:t,close:l}))))}),U=a(1276),W=a(1330),Y=a.n(W),G=Object(r.b)()(function(e){var t=e.post,a=e.dispatch,r=e.className,c=t.likes_count,s=t.created_at,l=t.isLiked,u=t.id,d=Object(n.useCallback)(function(e){var t=e.id;e.liked?a.posts.like(t):a.posts.unLike(t)},[]);return o.a.createElement("div",{className:"".concat(Y.a.actionsContainer," ").concat(r)},o.a.createElement("div",{className:Y.a.actions},o.a.createElement(U.a,{type:"post",id:u,isLiked:l,likesCount:c,onLike:d}),o.a.createElement(z,{className:Y.a.action,src:t.src}),o.a.createElement(m,{post:t})),o.a.createElement("time",{dateTime:s},i()(new Date(s),"YYYYMMDD").fromNow()))});a.d(t,"a",function(){return G})},1239:function(e,t,a){"use strict";var n=a(1),o=a.n(n),r=a(22),c=a(353),i=a(37),s=a(1233),l=a(167),u=Object(i.b)()(function(e){var t=e.dispatch,a=e.postId,n=e.isArchived,r=e.closeModal,c=function(e){e(a).then(function(e){var t=e.data;l.message.success(t.message)}).catch(function(e){l.message.error(e.response.data.message)}).finally(r)};return o.a.createElement(o.a.Fragment,null,n?o.a.createElement("li",{onClick:function(){c(t.posts.removeFromArchiveAsync)}},"Unarchive"):o.a.createElement("li",{onClick:function(){c(t.posts.addToArchiveAsync)}},"Archive"))}),m=Object(i.b)()(function(e){var t=e.postId,a=e.closeModal,o=e.dispatch;return n.createElement("li",{onClick:function(){o.posts.removeAsync(t).then(function(e){l.message.success(e.message)}).catch(function(e){return l.message.error(e.response.data.message)}).finally(a)}},"Delete post")}),d=o.a.memo(function(e){var t=e.link,a=e.closeModal;return o.a.createElement("li",{onClick:function(){var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),l.message.success("Link copied to clipboard"),a()}},"Copy link")}),_=a(1218),p=a(132),v=(a(248),a(123)),f=a(13),b=a(520),E=a.n(b),h=a(530),C=a(73),k=a(83),g=a(1230),O=a(534),N=a(1331),j=a.n(N),y=Object(i.b)()(function(e){var t,a=e.post,c=e.closeModal,i=e.dispatch,s=Object(n.useState)(!1),l=Object(r.a)(s,2),u=l[0],m=l[1],d=Object(n.useState)({id:(t=a).id,owner_id:t.owner_id,marks:t.marks,caption:t.caption,src:t.src,location:t.location,created_at:t.created_at}),_=Object(r.a)(d,2),p=_[0],b=_[1],N=Object(n.useState)(p.caption),y=Object(r.a)(N,2),S=y[0],M=y[1],B=Object(n.useCallback)(function(e){M(e.target.value)},[]);return o.a.createElement(o.a.Fragment,null,u?o.a.createElement(h.a,{goBack:function(e){e&&b(Object(f.a)({},p,{marks:e})),m(!1)},media:p.src,marks:p.marks,video:!!p.src.match(".mp4")}):o.a.createElement(k.a,null,o.a.createElement(C.a,{goNext:function(){i.posts.updateAsync(Object(f.a)({},p,{caption:S})).then(function(e){v.a.success(e.message)}).catch(function(e){return v.a.error(e.toString())}).finally(c)},goBack:c,title:"Edit post",nextButtonText:"Done"}),o.a.createElement("div",{className:j.a.wrapper},o.a.createElement(g.a,{media:p.src,marks:p.marks,postId:p.id}),o.a.createElement("div",{className:j.a.container},o.a.createElement(E.a,{maxRows:8,className:j.a.caption,placeholder:"Caption",onChange:B,defaultValue:S,maxLength:1e3}),o.a.createElement(O.a,{onChange:function(e){b(Object(f.a)({},p,{location:e}))},defaultLocation:a.location}),o.a.createElement("button",{className:j.a.button,onClick:function(){m(!0)}},"Mark friends")))))}),S=function(e){var t=e.post,a=e.closeModal,i=Object(n.useState)(!1),s=Object(r.a)(i,2),l=s[0],u=s[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("li",{onClick:function(){u(!0)}},"Edit"),Object(p.a)()?o.a.createElement(_.a,{visible:l,placement:"bottom",height:"100vh"},o.a.createElement(y,{post:t,closeModal:a})):o.a.createElement(c.a,{visible:l,onClose:function(){u(!1)}},o.a.createElement(y,{post:t,closeModal:a})))},M=Object(i.b)(function(e,t){return{me:e.auth.user.id===t.post.owner_id}})(function(e){var t=e.post,a=e.me,n=e.closeModal,r=t.id,c=t.src,i=t.archive,l=window.location.origin+"/p/"+c.match(/.+?\/.+?\/(.+?)\.+/)[1];return o.a.createElement(s.a,null,o.a.createElement("li",null,"Complain"),o.a.createElement(d,{link:l,closeModal:n}),a&&o.a.createElement(o.a.Fragment,null,o.a.createElement(u,{closeModal:n,isArchived:i,postId:r}),o.a.createElement(S,{closeModal:n,post:t}),o.a.createElement(m,{postId:r,closeModal:n})),o.a.createElement("li",{onClick:n},"Cancel"))}),B=(a(59),a(17)),w=a(1333),I=a.n(w),x=function(e){var t=e.open;return o.a.createElement("button",{className:I.a.optionsButton,onClick:t},o.a.createElement(B.a,{type:"ellipsis"}))},L=function(e){var t=e.post,a=Object(n.useState)(!1),i=Object(r.a)(a,2),s=i[0],l=i[1],u=function(){return l(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(c.a,{visible:s,onClose:u},o.a.createElement(M,{closeModal:u,post:t})),o.a.createElement(x,{open:function(){return l(!0)}}))},T=a(355),A=a(1232),P=a(1220),D=a.n(P),F=o.a.memo(function(e){var t=e.post_id,a=e.onComment,c=Object(n.useState)(!1),i=Object(r.a)(c,2),s=i[0],l=i[1],u=Object(n.useState)(!1),m=Object(r.a)(u,2),d=m[0],_=m[1],v=Object(n.useRef)();return o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n=v.current.value;n&&(l(!0),A.a({post_id:t,text:n}).then(function(e){var t=e.data;v.current.value="",_(!1),a(t.comment)}).finally(function(){l(!1)}))},className:D.a.commentInputContainer,id:"commentInputContainer"+t},o.a.createElement("input",{ref:v,placeholder:"Add comment",className:D.a.commentInput,onChange:function(e){_(e.target.value.length>0)}}),!Object(p.a)()&&d&&!s&&o.a.createElement("button",{type:"submit",className:D.a.submitButton},"Send"),s&&o.a.createElement(T.a,{className:D.a.loader}))}),R=o.a.memo(function(e){var t=e.post,a=e.onComment;return o.a.createElement("div",{className:D.a.footer},o.a.createElement(F,{post_id:t.id,onComment:a}),o.a.createElement(L,{post:t}))});a.d(t,"a",function(){return R})},1240:function(e,t,a){"use strict";var n=a(1),o=a.n(n),r=a(22),c=a(1446),i=a(1250),s=a.n(i),l=a(27),u=a.n(l),m=a(1276),d=a(94),_=a(37),p=a(1221),v=function(e){var t=e.closeModal,a=e.canDelete,n=e.removeComment;return o.a.createElement(p.a,null,a&&o.a.createElement("li",{onClick:n},"Delete"),o.a.createElement("li",null,"Reply"),o.a.createElement("li",{onClick:t},"Cancel"))},f=a(353),b=a(1232),E=Object(_.b)(function(e,t){return{canDelete:t.ownerId===e.auth.user.id||t.ownerId===(e.users.user&&e.users.user.id)}})(function(e){var t=e.id,a=e.canDelete,n=e.closeModal,r=e.isModalOpen,c=e.onRemove;return o.a.createElement(f.a,{visible:r,onClose:n},o.a.createElement(v,{closeModal:n,canDelete:a,removeComment:function(){b.d(t).then(function(){return c(t)})}}))}),h=a(1341),C=a.n(h),k=function(e){var t=e.comment,a=e.setCommentLiked,i=e.onRemove,l=t.isLiked,_=t.likes_count,p=t.owner,v=t.text,f=t.created_at,b=t.id,h=t.avatar,k=Object(n.useState)(!1),g=Object(r.a)(k,2),O=g[0],N=g[1],j=Object(n.useCallback)(function(){N(!1)},[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:C.a.comment,onClick:function(){N(!0)}},o.a.createElement("div",{className:C.a.infoAvatarContainer},h?o.a.createElement("img",{src:h,alt:"".concat(p," avatar"),className:C.a.avatar}):o.a.createElement(d.a,{fontSize:"16px",className:C.a.avatar}),o.a.createElement("div",{className:C.a.container},o.a.createElement("div",null,o.a.createElement(c.a,{to:"/"+p,onClick:function(e){return e.stopPropagation()},className:C.a.username},p),o.a.createElement(s.a,{className:C.a.text},v)),o.a.createElement("div",{className:C.a.metaContainer},o.a.createElement("time",{dateTime:f},u()(new Date(f),"YYYYMMDD").fromNow()),o.a.createElement(m.a,{type:"comment",id:b,isLiked:l,likesCount:_,onLike:a}))))),o.a.createElement(E,{isModalOpen:O,ownerId:t.owner_id,id:t.id,closeModal:j,onRemove:i}))},g=o.a.memo(function(e){var t=e.comments,a=e.onRemove,n=e.setCommentLiked;return o.a.createElement(o.a.Fragment,null,t.map(function(e){return o.a.createElement(k,{key:e.id,comment:e,onRemove:a,setCommentLiked:n})}))});a.d(t,"a",function(){return g})},1241:function(e,t,a){"use strict";var n=a(1),o=a.n(n),r=a(1446),c=a(94),i=a(1220),s=a.n(i),l=o.a.memo(function(e){var t=e.username,a=e.location,n=e.avatar;return o.a.createElement(r.a,{to:t},o.a.createElement("header",{className:s.a.header},n?o.a.createElement("img",{src:n,alt:"avatar",className:s.a.avatar}):o.a.createElement("div",{className:s.a.avatar},o.a.createElement(c.a,{fontSize:"16px"})),o.a.createElement("div",{className:s.a.usernameLocation},o.a.createElement("span",{className:s.a.username},t),o.a.createElement("span",{className:s.a.location},a))))});a.d(t,"a",function(){return l})},1242:function(e,t,a){"use strict";var n=a(22),o=a(1),r=a.n(o),c=a(1250),i=a.n(c),s=a(1343),l=a.n(s),u=function(e){var t=e.caption,a=e.username,c=e.className,s=Object(o.useState)(!1),u=Object(n.a)(s,2),m=u[0],d=u[1];return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{className:"".concat(l.a.captionContainer," ").concat(c),style:{display:m?"block":"flex"},onClick:function(){d(!m)}},r.a.createElement("span",{className:l.a.username},a),r.a.createElement(i.a,{className:m?l.a.fullCaption:l.a.shortCaption},t)))};a.d(t,"a",function(){return u})},1247:function(e,t,a){"use strict";var n=a(22),o=a(26),r=a(13),c=a(1),i=a(190),s=a(361),l=a(1225),u={dialogs:[]},m="SET_DIALOGS",d="ADD_DIALOGS",_="SET_IS_TYPING",p="READ_MESSAGES";function v(e,t){switch(t.type){case m:return Object(r.a)({},e,{dialogs:t.payload});case d:return Object(r.a)({},e,{dialogs:Object(i.a)([].concat(Object(o.a)(e.dialogs),Object(o.a)(t.payload)))});case _:return Object(r.a)({},e,{dialogs:e.dialogs.map(function(e){return e.user.id===t.payload.userId?(e.isTyping=t.payload.state,Object(r.a)({},e)):e})});case p:return Object(r.a)({},e,{dialogs:e.dialogs.map(function(e){return e.read||e.user.id!==t.payload?e:(e.read=!0,Object(r.a)({},e))})})}}var f=function(e){return{type:m,payload:e}},b=function(e){return{type:d,payload:e}},E=function(e){return{type:_,payload:e}};t.a=function(){var e=Object(c.useReducer)(v,u),t=Object(n.a)(e,2),a=t[0].dialogs,r=t[1],i=Object(c.useRef)([]),m=Object(c.useRef)([]),d=Object(c.useRef)(!1),_=Object(c.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return l.a(e).then(function(e){var t=e.data;return d.current||(d.current=!0),i.current=[].concat(Object(o.a)(i.current),Object(o.a)(t.data)),r(b(t.data)),t})},[d,i]);return{dialogs:a,addMessage:function(e){var t=i.current.findIndex(function(t){return t.user.id===e.owner_id});i.current=-1!==t?i.current.map(function(t){return t.user.id===e.owner_id&&(t=e),t}):[].concat(Object(o.a)(i.current),[e]),i.current=i.current.sort(function(e,t){return new Date(t.created_at)-new Date(e.created_at)}),r(f(i.current))},search:function(e){if(e.length>0){var t=i.current.map(function(t){if(t.user&&t.user.username&&t.user.username.startsWith(e))return t}).filter(Boolean);r(f("undefined"===typeof t?[]:t))}else a.length!==i.current.length&&r(f(i.current))},privateSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e.length>0)return s.a(e,t).then(function(e){var a=e.data;return r(1===t?f(a.data):b(a.data)),a});a.length!==i.current.length&&r(f(i.current))},readAllMessages:function(e){r({type:p,payload:e})},setIsTyping:function(e){r(E({userId:e,state:!0}));var t=m.current.find(function(t){return t.userId===e});t&&(clearInterval(t.timerId),m.current=m.current.filter(function(t){return t.userId!==e}));var a=Date.now(),n=setTimeout(function(){a+1500<=Date.now()&&(m.current=m.current.filter(function(t){return t.userId!==e}),r(E({userId:e,state:!1})))},1600);m.current.push({timerId:n,userId:e})},fetchDialogs:_,firstLoading:d.current,defaultDialogs:i.current}}},1248:function(e,t,a){e.exports={container:"optionsModal_container__1GZNV"}},1262:function(e,t,a){"use strict";var n=a(1),o=a.n(n),r=a(353),c=a(1322),i=a.n(c),s=function(e){var t=e.visible,a=e.title,n=e.children,c=e.className,s=e.onClose;return o.a.createElement(r.a,{visible:t,onClose:s},o.a.createElement("div",{className:"".concat(i.a.container," ").concat(c)},o.a.createElement("h1",{className:i.a.title},a),o.a.createElement("div",{className:i.a.body},n)))};a.d(t,"a",function(){return s})},1263:function(e,t,a){"use strict";var n=a(1),o=a.n(n),r=a(1214),c=a(1219),i=a.n(c),s=function(e){var t=e.text;return o.a.createElement(r.a,{icon:o.a.createElement("div",{className:i.a.bookmark}),text:"Save"},o.a.createElement("span",null,t))};s.defaultProps={text:"Save photos and videos you want to watch again.No one gets notified of this, and the saved items are visible only to you."},t.a=s},1268:function(e,t,a){e.exports={compilation:"savedBarCompilations_compilation__3r2k9",modalContainer:"savedBarCompilations_modalContainer__2ySLA",modalBody:"savedBarCompilations_modalBody__25i_M",title:"savedBarCompilations_title__38rS7",compilationName:"savedBarCompilations_compilationName__1_avE"}},1269:function(e,t,a){e.exports={staticSaveBar:"savebar_staticSaveBar__3N124",saveBar:"savebar_saveBar__1KRpK savebar_staticSaveBar__3N124",compilationsContainer:"savebar_compilationsContainer__1uSlu",staticButtonLink:"savebar_staticButtonLink__3uUhE",buttonLink:"savebar_buttonLink__fXJtb",compilationsList:"savebar_compilationsList__3E5PB",newButton:"savebar_newButton__36RJ9",transitionContainer:"savebar_transitionContainer__QsvNO"}},1276:function(e,t,a){"use strict";a(59);var n=a(17),o=a(22),r=a(1),c=a.n(r),i=a(1262),s=a(18),l=a(19),u=a(196),m=a(72),d=a(1232),_=a(1446),p=a(94),v=a(1324),f=a.n(v),b=function(e){var t=e.username,a=e.avatar;return c.a.createElement(_.a,{to:"/".concat(t),className:f.a.container},a?c.a.createElement("img",{src:a,alt:"".concat(t," avatar"),className:f.a.avatar}):c.a.createElement(p.a,{fontSize:"16px",className:f.a.avatar}),c.a.createElement("span",{className:f.a.username},t))},E=a(1326),h=a.n(E),C=function(e){var t=e.id,a=e.type,n=Object(r.useState)([]),i=Object(o.a)(n,2),s=i[0],l=i[1],_=Object(r.useCallback)(function(e){var n;return"post"===a?n=m.e(t,e):"comment"===a&&(n=d.c(t,e)),n.then(function(e){var t=e.data;return Array.isArray(t.data)&&l(t.data),t})},[t,a]);return c.a.createElement(u.a,{fetcher:_},c.a.createElement("div",{className:h.a.container},s.map(function(e){return c.a.createElement(b,{key:e.id,username:e.username,avatar:e.avatar})})))},k=a(1328),g=a.n(k),O=function(e){var t=e.id,a=e.likesCount,u=e.isLiked,m=e.onLike,d=e.type,_=Object(r.useState)(!1),p=Object(o.a)(_,2),v=p[0],f=p[1],b=Object(r.useCallback)(function(e){e&&e.stopPropagation(),f(!1)},[]);return c.a.createElement("div",null,!!a&&c.a.createElement("span",{onClick:function(e){e.stopPropagation(),f(!0)},className:g.a.likesCount},a),c.a.createElement("button",{className:g.a.action,onClick:function(e){e.stopPropagation();var a={entity_id:t,type:d};u?(m({id:t,liked:!1}),function(e){return s.a.post(l.a.unlike,e)}(a).catch(function(){return m({id:t,liked:!0})})):(m({id:t,liked:!0}),function(e){return s.a.post(l.a.like,e)}(a).catch(function(){return m({id:t,liked:!1})}))}},u?c.a.createElement(n.a,{type:"heart",className:g.a.redHeart}):c.a.createElement(n.a,{type:"heart",className:g.a.heart})),c.a.createElement(i.a,{visible:v,onClose:b,title:"Likes"},c.a.createElement(C,{id:t,type:d})))};a.d(t,"a",function(){return O})},1277:function(e,t,a){"use strict";var n=a(26),o=a(1),r=a.n(o),c=a(1219),i=a.n(c),s=function(e){var t=e.src;return r.a.createElement("div",{className:i.a.singlePic},t.match(".mp4")?r.a.createElement("video",{src:t,preload:"metadata"}):r.a.createElement("img",{src:t,alt:"Compilation"}))},l=function(e,t){return r.a.createElement("div",{className:i.a.media,key:t},e.match(".mp4")?r.a.createElement("video",{src:e,preload:"metadata"}):r.a.createElement("img",{src:e,alt:"Compilation"}))},u=function(e){var t=e.compilation,a=e.loadPosts,o=Object(n.a)(Object.values(t)[0]),c=Object.keys(t)[0],u=4===o.length;return r.a.createElement("div",{onClick:function(){return a(c)}},r.a.createElement("div",{className:i.a.compilationContainer},u?o.map(l):r.a.createElement(s,{src:o.pop()})),r.a.createElement("span",{className:i.a.compilationName},c))};u.defaultProps={loadPosts:function(){}};t.a=u},1299:function(e,t,a){e.exports={mediaContainer:"mediaPlayer_mediaContainer__2ZvMW",media:"mediaPlayer_media__1cCEi",fullWidthMedia:"mediaPlayer_fullWidthMedia__tb5Fd"}},1303:function(e,t,a){e.exports={drawerTitle:"drawerTitle_drawerTitle__1S5Hd",icon:"drawerTitle_icon__2GlCc"}},1305:function(e,t,a){e.exports={leave:"transitions_leave__3vvLs",leaveActive:"transitions_leaveActive__1efkK",enter:"transitions_enter__29Jsp",enterActive:"transitions_enterActive__1Ml-k"}},1307:function(e,t,a){e.exports={container:"postMedia_container__3h3DM",showMarksButton:"postMedia_showMarksButton___2bd2",showMarksButtonVideo:"postMedia_showMarksButtonVideo__19Rxw postMedia_showMarksButton___2bd2",drawer:"postMedia_drawer__1X-jA",computerMarksContainer:"postMedia_computerMarksContainer__2rRBd",mobileMarkedUsersContainer:"postMedia_mobileMarkedUsersContainer__3rSzn",markedUsersContainer:"postMedia_markedUsersContainer__2hh7X"}},1310:function(e,t,a){e.exports={save:"save_save__I2_dk actions_action__3eDSJ",bookmark:"save_bookmark__25Q0X",bookmarkSolid:"save_bookmarkSolid__1J63n save_bookmark__25Q0X",bookmarkFlat:"save_bookmarkFlat__1Dwee save_bookmark__25Q0X"}},1312:function(e,t,a){e.exports={container:"header_container__2SInd",media:"header_media__96_6_",input:"header_input__3-CX4"}},1314:function(e,t,a){e.exports={container:"user_container__3BDRc",avatar:"user_avatar__1TzAU",info:"user_info__36WoO",username:"user_username__31iDi",sendButton:"user_sendButton__saRtM",sentButton:"user_sentButton__10vOK user_sendButton__saRtM"}},1316:function(e,t,a){e.exports={container:"listOfUsers_container__10ku4",mobileContainer:"listOfUsers_mobileContainer__ZMjiA listOfUsers_container__10ku4"}},1318:function(e,t,a){e.exports={container:"body_container__2iHxI",mobileContainer:"body_mobileContainer__3P__l body_container__2iHxI",search:"body_search__3lgIR",doneButton:"body_doneButton__ruzTB"}},1320:function(e,t,a){e.exports={bodyWrapper:"share_bodyWrapper__12saK",button:"share_button__2rR58",plane:"share_plane__403Yg",drawer:"share_drawer__26S0_"}},1322:function(e,t,a){e.exports={container:"listModal_container__bzc16",title:"listModal_title__3oLQC",body:"listModal_body__3ASkV"}},1324:function(e,t,a){e.exports={container:"user_container__3mN7c",username:"user_username__2r6lH",avatar:"user_avatar__12vgc"}},1326:function(e,t,a){e.exports={container:"modalBody_container__1u0ne"}},1328:function(e,t,a){e.exports={action:"like_action__3qTTk actions_action__3eDSJ",heart:"like_heart__3Nfv7",redHeart:"like_redHeart__108G2",beat:"like_beat__378kX",likesCount:"like_likesCount__15Gyz"}},1330:function(e,t,a){e.exports={actionsContainer:"actions_actionsContainer__1Pj2P",actions:"actions_actions__3J5Yc",action:"actions_action__3eDSJ"}},1331:function(e,t,a){e.exports={wrapper:"editor_wrapper__1IiwG",container:"editor_container__3ntTI",button:"editor_button__2N8VY",caption:"editor_caption__1o_7P"}},1333:function(e,t,a){e.exports={optionsButton:"optionsModal_optionsButton__1kM-s"}},1341:function(e,t,a){e.exports={heart:"comment_heart__D7Pa3",heartActive:"comment_heartActive__29neS",comment:"comment_comment__2r_O1",username:"comment_username__1S6u6",metaContainer:"comment_metaContainer__3nY71",likesCount:"comment_likesCount__3gIYz",infoAvatarContainer:"comment_infoAvatarContainer__2n3NF",avatar:"comment_avatar__3FBrL",text:"comment_text__1DYzP",container:"comment_container__295Se"}},1343:function(e,t,a){e.exports={captionContainer:"caption_captionContainer__1_dn6",username:"caption_username__3AhvW",shortCaption:"caption_shortCaption__7hIIC",fullCaption:"caption_fullCaption__1mj23"}}}]);
//# sourceMappingURL=2.4fe4249d.chunk.js.map