(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,a){e.exports={settingsContainer:"settings_settingsContainer__1oepl",settingsButton:"settings_settingsButton__3Z80G",logoutContainer:"settings_logoutContainer__EG_vj",logout:"settings_logout__5GDbC"}},111:function(e,t,a){e.exports={commentList:"comment_commentList__2ROgt",comment:"comment_comment__37hpF",username:"comment_username__wmCQ0",metaContainer:"comment_metaContainer__3rqma",likesCount:"comment_likesCount__3Uvzg"}},112:function(e,t,a){e.exports={feedList:"feed_feedList__2kxss",item:"feed_item__vi1am",mediaContainer:"feed_mediaContainer__RM9a-",media:"feed_media__do6nA"}},113:function(e,t,a){e.exports={enter:"transitions_enter__hms4d",enterActive:"transitions_enterActive__2lKC0",leave:"transitions_leave__1d37o",leaveActive:"transitions_leaveActive__eomVv",appear:"transitions_appear__30VST",appearActive:"transitions_appearActive__JFFm9"}},114:function(e,t,a){e.exports={enter:"transitions_enter__wnKlL",enterActive:"transitions_enterActive__3gkB7",leave:"transitions_leave__3ZPQH",leaveActive:"transitions_leaveActive__2FBhl",appear:"transitions_appear__2jbun",appearActive:"transitions_appearActive__3tQNO"}},136:function(e,t,a){e.exports={friendshipsContainer:"friendships_friendshipsContainer__WJAiV",cardContainer:"friendships_cardContainer__2Q177",avatar:"friendships_avatar__2wuF9"}},137:function(e,t,a){e.exports={searchBar:"searchBar_searchBar__3w7tB",user:"searchBar_user__1ZgvI",avatar:"searchBar_avatar__2Vihv"}},155:function(e,t,a){e.exports={editContainer:"edit_editContainer__3_Pdd",editTitle:"edit_editTitle__3QDNx",editTitleCheck:"edit_editTitleCheck__1SaG-"}},157:function(e,t,a){e.exports={container:"story_container__3Ho0t",cover:"story_cover__3xP2H",addCover:"story_addCover__2JA1_ story_cover__3xP2H"}},158:function(e,t,a){e.exports={modalCover:"modal_modalCover__2kGGK",modalContent:"modal_modalContent__gAAt8",closeButton:"modal_closeButton__17mgk",closeIcon:"modal_closeIcon__3t4Dv"}},159:function(e,t,a){e.exports={group:"materialInput_group__mTZ9n",label:"materialInput_label__1K6Rl",bar:"materialInput_bar__gIraa",highlight:"materialInput_highlight__234u6",inputHighlighter:"materialInput_inputHighlighter__Stqz-"}},196:function(e,t,a){e.exports={leave:"transitions_leave___j7E1",leaveActive:"transitions_leaveActive__HlJ4R",appear:"transitions_appear__3rI3P",appearActive:"transitions_appearActive__3R0cz"}},199:function(e,t,a){e.exports={rememberForgotContainer:"login_rememberForgotContainer__3rK5X",loginRegisterContainer:"login_loginRegisterContainer__2D1vA",login:"login_login__3UNQ9"}},202:function(e,t,a){e.exports={sectionContainer:"explainingLabels_sectionContainer__JowmA",iconContainer:"explainingLabels_iconContainer__1puQk",sectionLabel:"explainingLabels_sectionLabel__2vRKV"}},203:function(e,t,a){e.exports={drawerContainer:"drawer_drawerContainer__bNMKe",transitionContainer:"drawer_transitionContainer__2BisC",wrapper:"drawer_wrapper__vG_Rp"}},204:function(e,t,a){e.exports={blacklistContainer:"blacklist_blacklistContainer__xR6RT",title:"blacklist_title__3p44i",cardsList:"blacklist_cardsList__34_JP"}},205:function(e,t,a){e.exports={header:"header_header__VrZvg",avatar:"header_avatar__3oAuk"}},206:function(e,t,a){e.exports={container:"search_container__2q4J_",search:"search_search__12beL",searchBox:"search_searchBox__2u3pI"}},280:function(e,t,a){e.exports={welcome:"welcome_welcome__11Kmz",card:"welcome_card__3d3Za"}},281:function(e,t,a){e.exports={navigationContainer:"navigationPanel_navigationContainer__m-2Rh",tabsContainer:"navigationPanel_tabsContainer__3SEy_"}},282:function(e,t,a){e.exports={post:"post_post__VD3Py",metaInfo:"post_metaInfo__rft4Q"}},283:function(e,t,a){e.exports={header:"uploadPost_header__1CKDs",mainContainer:"uploadPost_mainContainer__JgpO_",sideContainer:"uploadPost_sideContainer__3mTX2"}},284:function(e,t,a){e.exports={directionContainer:"direction_directionContainer__3ZDXM",username:"direction_username__3-aoG"}},285:function(e,t,a){e.exports={mainContainer:"userInfoHeader_mainContainer__1bL75",directionInfoContainer:"userInfoHeader_directionInfoContainer__1DXBQ",subMainContainer:"userInfoHeader_subMainContainer__3v6Xt",infoContainer:"userInfoHeader_infoContainer__3ZFRv"}},286:function(e,t,a){e.exports={submit:"forgotPass_submit__2Y2ET",loginRegisterContainer:"forgotPass_loginRegisterContainer__2AgnV"}},287:function(e,t,a){e.exports={submit:"resetPass_submit__2DeLM",loginRegisterContainer:"resetPass_loginRegisterContainer__1N7Bn"}},288:function(e,t,a){e.exports={pageContainer:"archive_pageContainer__3CBxB",title:"archive_title__3xT7f"}},289:function(e,t,a){e.exports={pageContainer:"likedPosts_pageContainer__9dW7Z",title:"likedPosts_title__3GbF7"}},432:function(e,t,a){e.exports={container:"user_container__1KSgJ"}},433:function(e,t,a){e.exports={userPageContainer:"userPage_userPageContainer__dhBbS"}},434:function(e,t,a){e.exports={container:"storiesList_container__35skX"}},435:function(e,t,a){e.exports={mediaContainer:"mediaPlayer_mediaContainer__1gyZl"}},436:function(e,t,a){e.exports={postModalContainer:"postModal_postModalContainer__1kVQJ"}},437:function(e,t,a){e.exports={avatar:"avatar_avatar__3dOVB"}},438:function(e,t,a){e.exports={listModalContainer:"listModal_listModalContainer__1X9Wr"}},439:function(e,t,a){e.exports={optionsButton:"optionsModal_optionsButton__2X0RS"}},440:function(e,t,a){e.exports={container:"postsList_container__3jrpH"}},441:function(e,t,a){e.exports={eye:"marksExplaining_eye__1tMFe"}},442:function(e,t,a){e.exports={pictureIcon:"postsExplainingLabel_pictureIcon__3O-SC"}},443:function(e,t,a){e.exports={appear:"transitions_appear__3mYBQ",appearActive:"transitions_appearActive__3Jyus"}},444:function(e,t,a){e.exports={actionsButton:"actionsModal_actionsButton__2Gg_1"}},445:function(e,t,a){e.exports={container:"home_container__31p8Y"}},446:function(e,t,a){e.exports={registerLoginContainer:"register_registerLoginContainer__35mhN"}},447:function(e,t,a){e.exports=a.p+"static/media/shuttle.85ce3153.png"},449:function(e,t,a){e.exports={container:"startLoader_container__3y5nY","right-1":"startLoader_right-1__3ojkf","right-2":"startLoader_right-2__x-Div","right-3":"startLoader_right-3__qY9VE","right-4":"startLoader_right-4__1ydZq","right-5":"startLoader_right-5__3G8eg"}},457:function(e,t,a){e.exports=a(995)},460:function(e,t,a){},54:function(e,t,a){e.exports={postControl:"postControl_postControl__1yAAL",header:"postControl_header__1Z6Oy",avatar:"postControl_avatar__vdIxC",username:"postControl_username__1vKM4",caption:"postControl_caption__130xT",captionUsername:"postControl_captionUsername__le7yJ",captionTextArea:"postControl_captionTextArea__1k6nf",footer:"postControl_footer__1td2Z",commentInputContainer:"postControl_commentInputContainer__3Ctxl",commentInput:"postControl_commentInput__RQf32"}},70:function(e,t,a){e.exports={savedContainer:"saved_savedContainer__nZVLu",compilationsLabel:"saved_compilationsLabel__1Njr7",bookmark:"saved_bookmark__1-e3Q",compilationsList:"saved_compilationsList__3COvr",compilationContainer:"saved_compilationContainer__7t2xO",compilationName:"saved_compilationName__4fg9G",pic:"saved_pic__1v9bq",singlePic:"saved_singlePic__1i5_A saved_pic__1v9bq"}},71:function(e,t,a){e.exports={actionsContainer:"actions_actionsContainer__2IWmd",actions:"actions_actions__10zvm",action:"actions_action__1_sQV",save:"actions_save__3QeW- actions_action__1_sQV",likesContainer:"actions_likesContainer__O72wD",bookmark:"actions_bookmark__3jTez",bookmarkSolid:"actions_bookmarkSolid__2cp2p actions_bookmark__3jTez",bookmarkFlat:"actions_bookmarkFlat__3n_AW actions_bookmark__3jTez"}},73:function(e,t,a){e.exports={mainContainer:"userInfo_mainContainer__LDi2z",unitContainer:"userInfo_unitContainer__3mxYI",unitNumber:"userInfo_unitNumber__16AOi",simpleTextStyledItem:"userInfo_simpleTextStyledItem__24aKM"}},80:function(e,t,a){e.exports={avatarContainer:"avatar_avatarContainer__24guy",avatar:"avatar_avatar__1BfLd",buttonsContainer:"avatar_buttonsContainer__32nCr",avatarActionButton:"avatar_avatarActionButton__3tgy3"}},99:function(e,t,a){e.exports={userCard:"card_userCard__2AgAv",user:"card_user__2Q84b",usernameWrapper:"card_usernameWrapper__z8rgX",username:"card_username__NsgoI",avatar:"card_avatar__3Bort",removeButton:"card_removeButton__3_EWq"}},995:function(e,t,a){"use strict";a.r(t);var n=a(133),r=a.n(n),o=a(185);a(460),a(462),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(1),c=a.n(i),s=a(51),l=a(19),u="SET_AUTH_USER",m="AUTH_LOGIN",p="AUTH_LOGOUT",d={isAuthenticated:!1,user:{}},f=function(e,t){return Object(l.a)({},e,{user:t})},v=function(e,t){return Object(l.a)({},e,{isAuthenticated:!0,user:t})},h=function(e){return Object(l.a)({},e,{isAuthenticated:!1})},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,r=void 0===n?null:n;switch(a){case m:return v(e,r);case u:return f(e,r);case p:return h(e);default:return e}},b=a(81),E="ADD_POSTS",g="ADD_SAVED_POSTS",y="SET_CURRENT_POST",O="REMOVE_POST",j="ADD_POST",C="REMOVE_CURRENT_POST",k="SAVE",w="REMOVE_SAVED_POST",S={posts:void 0,savedPosts:void 0,currentPost:void 0,isModalOpen:!1},N=function(e, t){return t.forEach(function(e){e.hasOwnProperty("__meta__")&&(Object.keys(e.__meta__).forEach(function(t){return e[t]=e.__meta__[t]}),delete e.__meta__)}),Object(l.a)({},e,{posts:t})},P=function(e, t){return t.forEach(function(e){e.hasOwnProperty("__meta__")&&(Object.keys(e.__meta__).forEach(function(t){return e[t]=e.__meta__[t]}),delete e.__meta__)}),Object(l.a)({},e,{savedPosts:t})},L=function(e,t){return Object(l.a)({},e,{currentPost:t,isModalOpen:!0})},x=function(e){return Object(l.a)({},e,{currentPost:void 0,isModalOpen:!1})},T=function(e,t){return Object(l.a)({},e,{isModalOpen:!1,posts:e.posts.filter(function(e){return e.id!==t})})},A=function(e,t){return Object(l.a)({},e,{posts:[t].concat(Object(b.a)(e.posts))})},I=function(e,t){var a=Object(l.a)({},e.currentPost);a.isLiked=!0,a.likes_count++;var n=e.posts.map(function(e){return e.id===t?(e.isLiked=!0,e.likes_count++,Object(l.a)({},e)):e});return Object(l.a)({},e,{posts:n,currentPost:a})},M=function(e,t){var a=Object(l.a)({},e.currentPost);a.isLiked=!1,a.likes_count--;var n=e.posts.map(function(e){return e.id===t?(e.isLiked=!1,e.likes_count--,Object(l.a)({},e)):e});return Object(l.a)({},e,{posts:n,currentPost:a})},F=function(e,t){var a=Object(l.a)({},e.currentPost);a.isSaved=!0;var n=Object(b.a)(e.posts).map(function(e){return e.id===t?(e.isSaved=!0,Object(l.a)({},e)):e});return Object(l.a)({},e,{currentPost:a,posts:n})},D=function(e,t){var a=Object(l.a)({},e.currentPost);a.isSaved=!1;var n=Object(b.a)(e.posts).map(function(e){return e.id===t?(e.isSaved=!1,Object(l.a)({},e)):e});return Object(l.a)({},e,{currentPost:a,posts:n})},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,r=void 0===n?null:n;switch(a){case E:return N(e,r);case g:return P(e,r);case y:return L(e,r);case C:return x(e);case j:return A(e,r);case O:return T(e,r);case"POST_LIKE":return I(e,r);case"POST_UNLIKE":return M(e,r);case k:return F(e,r);case w:return D(e,r);default:return e}},B="SET_USER",V="SET_FOLLOWERS",U="SET_FOLLOWS",z="UPDATE_AVATAR",H="DELETE_AVATAR",W="SET_PRIVATE",K="SET_PUBLIC",q="SET_BLACKLISTED",Q="SET_UNBLACKLISTED",X="FOLLOW",Z="UNFOLLOW",G={user:void 0,followers:void 0,follows:void 0},J=function(e, t){return t.hasOwnProperty("__meta__")&&(Object.keys(t.__meta__).forEach(function(e){return t[e]=t.__meta__[e]}),delete t.__meta__),Object(l.a)({},e,{user:t})},Y=function(e){var t=Object(l.a)({},e.user);return t.posts_count--,Object(l.a)({},e,{user:t})},$=function(e){var t=Object(l.a)({},e.user);return t.posts_count++,Object(l.a)({},e,{user:t})},ee=function(e,t){return Object(l.a)({},e,{followers:t})},te=function(e,t){return Object(l.a)({},e,{follows:t})},ae=function(e){var t=Object(l.a)({},e.user);return t.isFollows=!0,t.followers_count++,Object(l.a)({},e,{user:t})},ne=function(e){var t=Object(l.a)({},e.user);return t.isFollows=!1,t.followers_count--,Object(l.a)({},e,{user:t})},re=function(e,t){return e=Object(l.a)({},e,{user:Object(l.a)({},e.user,{avatar:t})})},oe=function(e){return e=Object(l.a)({},e,{user:Object(l.a)({},e.user,{avatar:null})})},ie=function(e){return e=Object(l.a)({},e,{user:Object(l.a)({},e.user,{private:!0})})},ce=function(e){return e=Object(l.a)({},e,{user:Object(l.a)({},e.user,{private:!1})})},se=function(e){var t=Object(l.a)({},e.user);return t.blacklisted=!0,Object(l.a)({},e,{user:t})},le=function(e){var t=Object(l.a)({},e.user);return t.blacklisted=!1,Object(l.a)({},e,{user:t})},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,r=void 0===n?null:n;switch(a){case B:return J(e,r);case V:return ee(e,r);case U:return te(e,r);case X:return ae(e);case Z:return ne(e);case j:return $(e);case O:return Y(e);case z:return re(e,r);case H:return oe(e);case W:return ie(e);case K:return ce(e);case q:return se(e);case Q:return le(e);default:return e}},me="ADD_COMMENTS",pe="REMOVE_COMMENT",de="ADD_COMMENT",fe={comments:[]},ve=function(e, t){return t.forEach(function(e){e.hasOwnProperty("__meta__")&&(Object.keys(e.__meta__).forEach(function(t){return e[t]=e.__meta__[t]}),delete e.__meta__)}),t=t.sort(function(e, t){return e.id>t.id?1:e.id<t.id?-1:0}),Object(l.a)({},e,{comments:t})},he=function(e, t){return Object(l.a)({},e,{comments:e.comments.filter(function(e){return e.id!==t})})},_e=function(e, t){return Object(l.a)({},e,{comments:[].concat(Object(b.a)(e.comments),[t])})},be=function(e,t){var a=Object(b.a)(e.comments).map(function(e){return e.id===t&&(e.isLiked=!0,e.likes_count++),e});return Object(l.a)({},e,{comments:a})},Ee=function(e,t){var a=Object(b.a)(e.comments).map(function(e){return e.id===t&&(e.isLiked=!1,e.likes_count--),e});return Object(l.a)({},e,{comments:a})},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,r=void 0===n?null:n;switch(a){case me:return ve(e,r);case pe:return he(e);case de:return _e(e,r);case"COMMENT_LIKE":return be(e,r);case"COMMENT_UNLIKE":return Ee(e,r);default:return e}},ye="SET_USERS",Oe="REMOVE_USERS",je={users:void 0},Ce=function(e,t){return Object(l.a)({},e,{users:t})},ke=function(e){return Object(l.a)({},e,{users:void 0})},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,r=void 0===n?null:n;switch(a){case ye:return Ce(e,r);case Oe:return ke(e);default:return e}},Se="ADD_COMPILATIONS",Ne="REMOVE_COMPILATION",Pe={compilations:void 0},Le=function(e, t){return Object(l.a)({},e,{compilations:t})},xe=function(e){return Object(l.a)({},e,{compilations:void 0})},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,r=void 0===n?null:n;switch(a){case Se:return Le(e,r);case Ne:return xe(e);default:return e}},Ae="SET_VISIBLE",Ie="SET_EDITED_USERNAME",Me="SET_EDITED_BIO",Fe="SET_EDITED_SITE",De={visible:!1,username:void 0,bio:void 0,site:void 0},Re=function(e,t){return Object(l.a)({},e,{visible:t})},Be=function(e,t){return Object(l.a)({},e,{username:t})},Ve=function(e,t){return Object(l.a)({},e,{bio:t})},Ue=function(e,t){return Object(l.a)({},e,{site:t})},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,r=void 0===n?null:n;switch(a){case Ae:return Re(e,r);case Ie:return Be(e,r);case Me:return Ve(e,r);case Fe:return Ue(e,r);default:return e}},He="SET_BLACKLISTED_USERS",We="REMOVE_FROM_BLACKLISTED_USERS",Ke={users:void 0},qe=function(e,t){return Object(l.a)({},e,{users:t})},Qe=function(e,t){return Object(l.a)({},e,{users:e.users.filter(function(e){return e.id!==t})})},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,r=void 0===n?null:n;switch(a){case He:return qe(e,r);case We:return Qe(e,r);default:return e}},Ze=Object(s.c)({auth:_,posts:R,users:ue,comments:ge,search:we,saved:Te,edit:ze,blacklist:Xe}),Ge=a(415),Je=function(e){return function(e){return function(t){return t.type===p&&(localStorage.removeItem("expiresIn"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")),e(t)}}},Ye=Object(s.d)(Ze,Object(s.a)(Ge.a,Je)),$e=a(7),et=a(1019),tt=a(1020),at=a(14),nt=a(15),rt=a(18),ot=a(16),it=a(17),ct=a(31),st=a(38),lt=a(1011),ut=a(1015),mt=a(1009),pt=a(95),dt=a(97),ft=a.n(dt);function vt(e){return{type:m,payload:e}}function ht(){return{type:p}}var _t=a(29),bt=a.n(_t),Et=document.head.querySelector('meta[name="csrf-token"]');ft.a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",ft.a.defaults.headers.common["X-CSRF-TOKEN"]=Et.content,ft.a.defaults.headers.common.Authorization="Bearer ".concat(localStorage.getItem("accessToken")),ft.a.interceptors.response.use(function(e){return e},function(e){return 401===e.response.status&&Ye.dispatch(ht()),Promise.reject(e)});var gt=!1;ft.a.interceptors.request.use(function(){var e=Object(o.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(localStorage.hasOwnProperty("expiresIn")&&localStorage.getItem("expiresIn")<bt()().format("X"))||gt){e.next=6;break}return gt=!0,e.next=4,new Promise(function(e,t){yt.post("/api/v1/auth/refresh",{refreshToken:localStorage.getItem("refreshToken")}).then(function(t){var a=t.data,n=a.token,r=a.expiresIn,o=a.refreshToken;Ot(r,n,o),yt.defaults.headers.common.Authorization="Bearer ".concat(n),e(a)}).catch(function(e){return t(e)})}).catch(function(){throw new ft.a.Cancel});case 4:gt=!1,t.headers.Authorization="Bearer ".concat(localStorage.getItem("accessToken"));case 6:return e.abrupt("return",Promise.resolve(t));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());var yt=ft.a;function Ot(e,t,a){localStorage.setItem("accessToken",t),localStorage.setItem("expiresIn",e),localStorage.setItem("refreshToken",a)}function jt(e){var t=e.remember,a=Object(pt.a)(e,["remember"]);return function(e){return new Promise(function(n,r){yt.post("/api/v1/auth/login",a).then(function(a){var n=a.data,r=n.token,o=n.expiresIn,i=n.refreshToken,c=n.user;t&&Ot(o,r,i),yt.defaults.headers.common.Authorization="Bearer ".concat(r),e(vt(c))}).catch(function(e){return r(e)})})}}function Ct(e){return function(t){return new Promise(function(t,a){yt.post("/api/v1/auth/password/reset",e).then(function(e){var a=e.data;return t(a.message)}).catch(function(e){var t=e.response;return a(t.data.message)})})}}function kt(e){return function(t){return new Promise(function(t,a){yt.post("/api/v1/auth/password/update",e).then(function(e){var a=e.data;return t(a.message)}).catch(function(e){var t={message:e.response.data.message,statusCode:e.response.status};return a(t)})})}}function wt(e){return function(t){return new Promise(function(t,a){yt.post("/api/v1/auth/register",e).then(function(e){var a=e.data;return t(a)}).catch(function(e){return a(e.response.data)})})}}var St=a(10),Nt=a(26),Pt=a(1012),Lt=a(1021),xt=a(1016),Tt=a(42),At=function(e){var t=e.getFieldDecorator,a=e.fieldName,n=e.validator;return c.a.createElement(Tt.a,null,t(a,{rules:[{required:!0,message:"Please input your password!"},{max:32,message:"Password must be less than 32 characters!"},{min:6,message:"Password must be at least 6 characters!"},{validator:n}]})(c.a.createElement(xt.a,{prefix:c.a.createElement(st.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})))};At.defaultProps={fieldName:"password"};var It=At,Mt=a(1018),Ft=function(e){var t=e.getFieldDecorator,a=e.remember,n=e.onChange;return c.a.createElement(c.a.Fragment,null,t("remember",{valuePropName:"checked",initialValue:a})(c.a.createElement(Mt.a,{onChange:n},"Remember me")))},Dt=function(e){var t=e.getFieldDecorator,a=e.fieldName,n=void 0===a?"username":a,r=e.initialValue,o=void 0===r?"":r,i=e.onChange;return c.a.createElement(Tt.a,null,t(n,{rules:[{required:!0,message:"Please input your username!"},{max:16,message:"Username must be less than 16 characters!"},{min:1,message:"Username must be at least 2 characters!"},{pattern:/^[a-zA-Z0-9]+$/,message:"Invalid username"}],initialValue:o})(c.a.createElement(xt.a,{onChange:i,prefix:c.a.createElement(st.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"})))},Rt=a(199),Bt=a.n(Rt),Vt=function(e){function t(e){var a;return Object(at.a)(this,t),(a=Object(rt.a)(this,Object(ot.a)(t).call(this,e))).state={loading:!1,remember:!0},a.handleSubmit=a.handleSubmit.bind(Object(ct.a)(Object(ct.a)(a))),a.changeRemember=a.changeRemember.bind(Object(ct.a)(Object(ct.a)(a))),a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"changeRemember",value:function(){this.setState(function(e){return{remember:!e.remember}})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props,n=a.form,r=a.login,o=a.history,i=this.state.remember;n.validateFields(function(e,a){var n=a.username,c=a.password;e||(t.setState({loading:!0}),r({username:n,password:c,remember:i}).then(function(){return o.push("/")}).catch(function(e){t.setState({loading:!1}),Nt.message.error(e.response.data.message)}))})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=c.a.createElement(st.a,{type:"loading",style:{fontSize:24},spin:!0}),a=this.state.remember;return c.a.createElement(lt.a,{spinning:this.state.loading,indicator:t},c.a.createElement("h1",{style:{textAlign:"center"}},"Login"),c.a.createElement(ut.a,{onSubmit:this.handleSubmit},c.a.createElement(Dt,{getFieldDecorator:e}),c.a.createElement(It,{getFieldDecorator:e,validator:this.validateToNextPassword}),c.a.createElement(Tt.a,null,c.a.createElement("div",{className:Bt.a.rememberForgotContainer},c.a.createElement(Ft,{getFieldDecorator:e,remember:a,onChange:this.changeRemember}),c.a.createElement(Pt.a,{to:"/password-reset"},"Forgot password")),c.a.createElement("div",{className:Bt.a.loginRegisterContainer},c.a.createElement(mt.a,{className:Bt.a.login,type:"primary",htmlType:"submit"},"Log in"),c.a.createElement(Pt.a,{to:"/register"},"Register now!")))))}}]),t}(c.a.Component),Ut=ut.a.create()(Object(St.a)(null,function(e){return Object(s.b)({login:jt},e)})(Object(Lt.a)(Vt))),zt=a(1017),Ht=a(280),Wt=a.n(Ht),Kt=function(e){var t=e.children;return c.a.createElement("div",{className:Wt.a.welcome},c.a.createElement(zt.a,{className:Wt.a.card},t))};Kt.defaultProps={children:c.a.createElement(Ut,null)};var qt=Kt;function Qt(e){return{type:B,payload:e}}function Xt(e){return function(t){return new Promise(function(a,n){yt.patch("/api/v1/users",e).then(function(e){var n,r=e.data;t((n=r.user,{type:u,payload:n})),t(Qt(r.user)),a(r.message)}).catch(function(e){return n(e.response.data.message)})})}}function Zt(e){return function(t){return new Promise(function(a,n){yt.get("/api/v1/users/followers?id="+e).then(function(e){var n,r=e.data;t((n=r.followers,{type:V,payload:n})),a({friendships:r.followers})}).catch(function(e){return n(e)})})}}function Gt(e){return function(t){return new Promise(function(a,n){yt.get("/api/v1/users/follows?id="+e).then(function(e){var n,r=e.data;t((n=r.follows,{type:U,payload:n})),a({friendships:r.follows})}).catch(function(e){return n(e)})})}}function Jt(e){return function(t){return new Promise(function(a,n){yt.put("/api/v1/users/avatar",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){var n,r=e.data;t((n=r.avatar,{type:z,payload:n})),a(r)}).catch(function(e){return n(e)})})}}function Yt(){return function(e){return new Promise(function(t,a){yt.delete("/api/v1/users/avatar").then(function(){e({type:H}),t()}).catch(function(e){return a(e)})})}}function $t(){return function(e){return new Promise(function(t,a){yt.post("/api/v1/users/privacy").then(function(a){var n=a.data;e({type:W}),t(n.message)}).catch(function(e){return a(e)})})}}function ea(){return function(e){return new Promise(function(t,a){yt.delete("/api/v1/users/privacy").then(function(a){var n=a.data;e({type:K}),t(n.message)}).catch(function(e){return a(e)})})}}function ta(){return function(e){return new Promise(function(t,a){yt.get("/api/v1/users/blacklist").then(function(a){var n,r=a.data;e((n=r.data,{type:He,payload:n})),t()}).catch(function(e){return a(e)})})}}function aa(e){return function(t){return new Promise(function(a,n){yt.post("/api/v1/users/blacklist",e).then(function(e){var n,r=e.data;t({type:q,payload:n}),a(r.message)}).catch(function(e){return n(e)})})}}function na(e){return function(t){return new Promise(function(a,n){yt.delete("/api/v1/users/blacklist?id="+e).then(function(n){var r,o=n.data;t({type:Q,payload:r}),t(function(e){return{type:We,payload:e}}(e)),a(o.message)}).catch(function(e){return n(e)})})}}var ra=a(432),oa=a.n(ra),ia=a(433),ca=a.n(ia),sa=a(434),la=a.n(sa),ua=a(157),ma=a.n(ua),pa=function(e){var t=e.story;return c.a.createElement("div",{className:ma.a.container},c.a.createElement("img",{src:t.src,className:ma.a.cover}),c.a.createElement("span",null,t.name||"Hightlits"))},da=function(){return c.a.createElement("div",{className:ma.a.container},c.a.createElement("span",{className:ma.a.addCover},"+"),c.a.createElement("span",null,"Add story!"))},fa=function(e){var t=e.stories;return c.a.createElement("div",{className:la.a.container},c.a.createElement(da,null),t.map(function(e,t){return c.a.createElement(pa,{key:t,story:e})}))},va=a(281),ha=a.n(va),_a=a(999);function ba(){return function(e){return new Promise(function(t,a){yt.get("/api/v1/compilations").then(function(a){var n,r=a.data;e((n=r.compilations,{type:Se,payload:n.length?n:void 0})),t()}).catch(function(e){return a(e)})})}}var Ea=a(70),ga=a.n(Ea),ya=a(202),Oa=a.n(ya),ja=function(e){var t=e.children,a=e.icon,n=e.text;return c.a.createElement("div",{className:Oa.a.sectionContainer},c.a.createElement("div",{className:Oa.a.iconContainer},a),c.a.createElement("span",{className:Oa.a.sectionLabel},n),t)},Ca=function(){return c.a.createElement(ja,{icon:c.a.createElement("div",{className:ga.a.bookmark}),text:"Save"},c.a.createElement("span",null,"Save photos and videos you want to watch again. No one gets notified of this, and the saved items are visible only to you."))},ka=function(e,t){return c.a.createElement("div",{className:ga.a.pic,key:t},c.a.createElement("img",{src:e}))},wa=function(e){return c.a.createElement("div",null,c.a.createElement("div",{className:ga.a.singlePic},c.a.createElement("img",{src:e})))},Sa=function(e){var t=e.compilation,a=e.loadPosts,n=Object(b.a)(Object.values(t)[0]),r=Object.keys(t)[0],o=4===n.length;return c.a.createElement("div",{onClick:function(){return a(r)}},o?c.a.createElement("div",{className:ga.a.compilationContainer},n.map(ka)):wa(n.pop()),c.a.createElement("span",{className:ga.a.compilationName},r))};function Na(e){return{type:E,payload:e}}function Pa(e){return{type:y,payload:e}}function La(){return{type:C}}function xa(e){return{type:O,payload:e}}function Ta(e){return{type:me,payload:e}}function Aa(e){return function(t){return new Promise(function(a,n){yt.get("/api/v1/comments?post_id="+e).then(function(e){var n=e.data;if(n.private)return a({isPrivate:!0});t(Ta(n.data)),a({isPrivate:!1})}).catch(function(e){return n(e)})})}}function Ia(e){return function(t){return new Promise(function(a,n){yt.post("/api/v1/comments",e).then(function(e){var n,r=e.data;t((n=r.comment,{type:de,payload:n})),a(r)}).catch(function(e){return n(e)})})}}function Ma(e){return function(t){return new Promise(function(a,n){yt.post("/api/v1/posts",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){var n,r=e.data;t((n=r.post,{type:j,payload:n})),a(r)}).catch(function(e){return n(e)})})}}function Fa(e){return function(t){return new Promise(function(a,n){yt.get("/api/v1/compilations/posts?compilation="+e).then(function(e){var n,r=e.data;t((n=r.data,{type:g,payload:n})),a()}).catch(function(e){return n(e)})})}}function Da(e){return function(t){return new Promise(function(a,n){yt.post("/api/v1/posts/save",e).then(function(){return t((a=e.post_id,{type:k,payload:a}));var a}).catch(function(e){return n(e)})})}}function Ra(e){return function(t){return new Promise(function(a,n){yt.delete("/api/v1/posts/save?post_id="+e).then(function(){return t({type:w,payload:e})}).catch(function(e){return n(e)})})}}var Ba=Object(St.a)()(function(e){var t=e.compilations,a=e.goToSavedPosts,n=e.dispatch,r=function(e){n(Fa(e)),a()};return c.a.createElement("div",{className:ga.a.compilationsList},t.map(function(e,t){return c.a.createElement(Sa,{key:t,compilation:e,loadPosts:r})}))}),Va=Object(St.a)(function(e){return{compilations:e.saved.compilations}})(function(e){var t=e.compilations,a=e.goToSavedPosts;return c.a.createElement(c.a.Fragment,null,t?c.a.createElement(Ba,{compilations:t,goToSavedPosts:a}):c.a.createElement(Ca,null))}),Ua=function(){return c.a.createElement(st.a,{type:"loading"})};var za=function(e){return function(t){var a=t.isLoading,n=Object(pt.a)(t,["isLoading"]);return a?c.a.createElement(Ua,null):c.a.createElement(e,n)}},Ha=a(158),Wa=a.n(Ha),Ka=function(e){var t=e.children,a=e.closeModal;return Object($e.createPortal)(c.a.createElement("aside",{className:Wa.a.modalCover,id:"modalCover",onClick:function(e){"modalCover"===e.target.id&&a()}},c.a.createElement("button",{onClick:a,className:Wa.a.closeButton,"aria-label":"Close Modal"},c.a.createElement("svg",{className:Wa.a.closeIcon,viewBox:"0 0 40 40"},c.a.createElement("path",{d:"M 10,10 L 30,30 M 30,10 L 10,30"}))),c.a.createElement("div",{className:Wa.a.modalContent},t)),document.body)},qa=function(e){function t(e){var a;return Object(at.a)(this,t),(a=Object(rt.a)(this,Object(ot.a)(t).call(this,e))).state={play:!1},a.playerRef=c.a.createRef(),a.play=a.play.bind(Object(ct.a)(Object(ct.a)(a))),a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"play",value:function(){this.state.play?this.playerRef.current.pause():this.playerRef.current.play(),this.setState(function(e){return{play:!e.play}})}},{key:"render",value:function(){return c.a.createElement("video",{onClick:this.play,src:this.props.src,ref:this.playerRef})}}]),t}(c.a.Component),Qa=a(435),Xa=a.n(Qa),Za=function(e){var t=e.media;return c.a.createElement("div",{className:Xa.a.mediaContainer},t.match(".mp4")?c.a.createElement(qa,{src:t}):c.a.createElement("img",{src:t}))},Ga=a(436),Ja=a.n(Ga),Ya=a(54),$a=a.n(Ya),en=a(437),tn=a.n(en),an=function(e){var t=e.fontSize,a=void 0===t?"50px":t;return c.a.createElement("div",{className:tn.a.avatar},c.a.createElement(st.a,{type:"user",style:{fontSize:a}}))},nn=function(e){var t=e.username,a=e.avatar;return c.a.createElement(Pt.a,{to:t},c.a.createElement("header",{className:$a.a.header},a?c.a.createElement("img",{src:a,alt:"avatar",className:$a.a.avatar}):c.a.createElement("div",{className:$a.a.avatar},c.a.createElement(an,{fontSize:"20px"})),c.a.createElement("span",{className:$a.a.username},t)))},rn=a(71),on=a.n(rn);var cn=function(e){switch(e){case"comment":return"COMMENT_LIKE";case"post":return"POST_LIKE"}},sn=function(e){switch(e){case"comment":return"COMMENT_UNLIKE";case"post":return"POST_UNLIKE"}};function ln(e){return function(t){return new Promise(function(a, n){yt.post("/api/v1/like",e).then(function(){return t({type:cn((a=e).type),payload:a.entity_id});var a}).catch(function(e){return n(e)})})}}function un(e){return function(t){return new Promise(function(a, n){yt.post("/api/v1/unlike",e).then(function(){return t({type:sn((a=e).type),payload:a.entity_id});var a}).catch(function(e){return n(e)})})}}var mn=Object(St.a)()(function(e){var t=e.post,a=e.dispatch;return c.a.createElement("button",{className:on.a.action,onClick:function(){var e={entity_id:t.id,type:"post"};a(t.isLiked?un(e):ln(e))}},t.isLiked?c.a.createElement(st.a,{type:"heart",style:{color:"rgba(255,0,0,1)"}}):c.a.createElement(st.a,{type:"heart",style:{color:"rgba(0,0,0,1)"}}))});function pn(e){var t=document.getElementById(e),a=t.getAttribute("href"),n=document.querySelector(a);n&&t.addEventListener("click",function(e){e.preventDefault(),n.scrollIntoView({behavior:"smooth",block:"start"})})}function dn(e){var t=(new Date).getTime(),a=bt()(e),n=bt.a.duration(t-a);return Math.round(n.asSeconds())<60?Math.round(n.asSeconds())+" seconds":Math.round(n.asSeconds())>=60&&Math.round(n.asMinutes())<60?Math.round(n.asMinutes())+" minutes":Math.round(n.asMinutes())>=60&&Math.round(n.asHours())<24?Math.round(n.asHours())+" hours":Math.round(n.asHours())>=24&&Math.round(n.asDays())<365?Math.round(n.asDays())+" days":Math.round(n.asDays())>=365?Math.round(n.asYears())+" years":void 0}var fn=Object(St.a)()(function(e){var t=e.post,a=e.dispatch;return c.a.createElement("div",{className:on.a.save,role:"button"},t.isSaved?c.a.createElement("div",{className:on.a.bookmarkSolid,onClick:function(){a(Ra(t.id))}}):c.a.createElement("div",{className:on.a.bookmarkFlat,onClick:function(){a(Da({post_id:t.id}))}}))}),vn=function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(ot.a)(t).apply(this,arguments))}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"componentDidMount",value:function(){pn("postCommentLink"+this.props.post.id)}},{key:"render",value:function(){var e=this.props.post;return c.a.createElement("div",{className:on.a.actionsContainer},c.a.createElement("div",{className:on.a.actions},c.a.createElement("div",{className:on.a.likesContainer},c.a.createElement("span",null,e.likes_count||""),c.a.createElement(mn,{post:e})),c.a.createElement("a",{className:on.a.action,id:"postCommentLink"+e.id,href:"#commentInputContainer"+e.id},c.a.createElement(st.a,{type:"message",style:{color:"rgba(0,0,0,1)"}})),c.a.createElement(fn,{post:e})),c.a.createElement("time",{dateTime:e.created_at},"".concat(dn(e.created_at)," ago")))}}]),t}(c.a.Component),hn=Object(St.a)()(function(e){var t=e.dispatch,a=e.post_id,n=e.isArchived;return c.a.createElement(c.a.Fragment,null,n?c.a.createElement("li",{onClick:function(){var e;t((e=a,function(t){return new Promise(function(a,n){yt.delete("/api/v1/posts/archive?post_id="+e).then(function(n){var r=n.data;t(xa(e)),a(r.message)}).catch(function(e){return n(e.response.data.message)})})})).then(function(e){Nt.message.success(e)}).catch(function(e){Nt.message.error(e)})}},"Unarchive"):c.a.createElement("li",{onClick:function(){var e;t((e={post_id:a},function(t){return new Promise(function(a,n){yt.post("/api/v1/posts/archive",e).then(function(n){var r=n.data;t(xa(e.post_id)),a(r.message)}).catch(function(e){return n(e.response.data.message)})})})).then(function(e){Nt.message.success(e)}).catch(function(e){Nt.message.error(e)})}},"Archive"))}),_n=a(438),bn=a.n(_n),En=function(e){var t=e.children;return c.a.createElement("ul",{className:bn.a.listModalContainer},t)},gn=Object(St.a)(function(e){return{currentUserId:e.auth.user.id}})(function(e){var t=e.post_id,a=e.owner_id,n=e.isArchived,r=e.link,o=e.currentUserId,i=e.dispatch,s=e.closeModal,l=a===o;return c.a.createElement(En,null,c.a.createElement("li",null,"Complain"),c.a.createElement("li",null,"Share"),c.a.createElement("li",{onClick:function(){var e=document.createElement("textarea");e.value=r,e.setAttribute("readonly",""),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),Nt.message.success("Link copied to clipboard")}},"Copy link"),l&&c.a.createElement(c.a.Fragment,null,c.a.createElement(hn,{isArchived:n,post_id:t}),c.a.createElement("li",null,"Edit post"),c.a.createElement("li",{onClick:function(){var e;a===o?i((e=t,function(t){return new Promise(function(a,n){yt.delete("/api/v1/posts?id="+e).then(function(n){var r=n.data;t(xa(e)),a(r)}).catch(function(e){return n(e)})})})).then(function(e){Nt.message.success(e.message),i(La())}).catch(function(e){return Nt.message.error(e.response.data.message)}):Nt.message.error("Only owner can delete post")}},"Delete post")),c.a.createElement("li",{onClick:s},"Cancel"))}),yn=a(439),On=a.n(yn),jn=function(e){var t=e.open;return c.a.createElement("button",{className:On.a.optionsButton,onClick:t},c.a.createElement(st.a,{type:"ellipsis"}))},Cn=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1},a.closeModal=function(){a.setState({isOpen:!1})},a.open=function(){a.setState({isOpen:!0})},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.state.isOpen,t=this.props.post,a=window.location.origin+"/p/"+t.src.match(/.+?\/.+?\/(.+?)\.+/)[1];return c.a.createElement(c.a.Fragment,null,e&&c.a.createElement(Ka,{closeModal:this.closeModal},c.a.createElement(gn,{closeModal:this.closeModal,post_id:t.id,owner_id:t.owner_id,isArchived:t.archive,link:a})),c.a.createElement(jn,{open:this.open}))}}]),t}(c.a.PureComponent);var kn=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).state={inputValue:"",loading:!1},a.inputRef=Object(i.createRef)(),a.submit=function(){var e=a.inputRef.current.value,t=a.props,n=t.post_id,r=t.dispatch;e&&(a.setState({loading:!0}),r(Ia({post_id:n,text:e})).then(function(){a.setState({inputValue:"",loading:!1}),a.inputRef.current.value=""}).catch(function(){return a.setState({loading:!1})}))},a.onChangeInput=function(e){return a.setState({inputValue:e.target.value})},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.state.loading,t=this.props.post_id;return c.a.createElement("div",{className:$a.a.commentInputContainer,id:"commentInputContainer"+t},c.a.createElement("input",{ref:this.inputRef,placeholder:"Add comment",className:$a.a.commentInput,onChange:this.onChangeInput}),!/Mobile|webOS|BlackBerry|IEMobile|MeeGo|mini|Fennec|Windows Phone|Android|iP(ad|od|hone)/i.test(navigator.userAgent)&&c.a.createElement(mt.a,{onClick:this.submit,size:"small",style:{width:"100%"},loading:e},"Submit"))}}]),t}(c.a.PureComponent),wn=Object(St.a)()(kn),Sn=function(e){var t=e.post;return c.a.createElement("div",{className:$a.a.footer},c.a.createElement(wn,{post_id:t.id}),c.a.createElement(Cn,{post:t}))},Nn=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).state={isInput:!1},a.changeInput=function(){return a.setState({isInput:!0})},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.props.post,t=this.state.isInput;return c.a.createElement("div",{className:$a.a.caption},c.a.createElement("h4",{className:$a.a.captionUsername},e.owner),t?c.a.createElement("textarea",{defaultValue:e.caption,className:$a.a.captionTextArea}):c.a.createElement("span",{onClick:this.changeInput},e.caption))}}]),t}(c.a.Component),Pn=a(111),Ln=a.n(Pn),xn=function(e){var t=e.comment,a=e.like;return c.a.createElement("div",null,c.a.createElement("div",{className:Ln.a.comment},c.a.createElement("div",null,c.a.createElement("span",{className:Ln.a.username},t.owner),c.a.createElement("span",null,t.text)),c.a.createElement("div",{className:Ln.a.metaContainer},c.a.createElement("time",{dateTime:t.created_at},dn(t.created_at)),c.a.createElement("div",null,c.a.createElement("span",{className:Ln.a.likesCount},t.likes_count||""),t.isLiked?c.a.createElement(st.a,{type:"heart",style:{color:"rgba(255,0,0,1)"},onClick:function(){return a(t)}}):c.a.createElement(st.a,{type:"heart",style:{color:"rgba(0,0,0,1)"},onClick:function(){return a(t)}})))))},Tn=Object(St.a)()(function(e){var t=e.comments,a=e.dispatch,n=function(e){var t={entity_id:e.id,type:"comment"};a(e.isLiked?un(t):ln(t))};return c.a.createElement("div",{className:Ln.a.commentList},t.map(function(e,t){return c.a.createElement(xn,{key:t,comment:e,like:n})}))}),An=Object(St.a)(function(e){return{comments:e.comments.comments}})(function(e){var t=e.post,a=e.comments;return c.a.createElement("div",{className:$a.a.postControl},c.a.createElement(nn,{username:t.owner,avatar:t.avatar}),c.a.createElement(Nn,{post:t}),c.a.createElement(Tn,{comments:a}),c.a.createElement(vn,{post:t}),c.a.createElement(Sn,{post:t}))}),In=function(e){var t=e.post;return c.a.createElement("article",{className:Ja.a.postModalContainer},c.a.createElement(Za,{media:t.src}),c.a.createElement(An,{post:t}))},Mn=Object(St.a)(function(e){return{isOpen:e.posts.isModalOpen,currentPost:e.posts.currentPost}})(function(e){var t=e.isOpen,a=e.currentPost,n=e.dispatch;return c.a.createElement(c.a.Fragment,null,t&&a&&c.a.createElement(Ka,{closeModal:function(){return n(La())}},c.a.createElement(In,{post:a})))}),Fn=a(440),Dn=a.n(Fn),Rn=a(113),Bn=a.n(Rn),Vn=a(282),Un=a.n(Vn),zn=function(e){var t=e.post,a=e.open;return c.a.createElement("div",{className:Un.a.post,onClick:function(){return a(t)}},t.src.match(".mp4")?c.a.createElement("video",{src:t.src}):c.a.createElement("img",{alt:"user's post",src:t.src}),c.a.createElement("div",{className:Un.a.metaInfo},c.a.createElement("div",null,t.likes_count,c.a.createElement(st.a,{style:{marginLeft:"10px"},type:"heart"})),c.a.createElement("div",null,t.comments_count,c.a.createElement(st.a,{style:{marginLeft:"10px"},type:"message"}))))},Hn=a(79),Wn=a.n(Hn),Kn=za(Object(St.a)()(function(e){var t=e.posts,a=e.dispatch,n=function(e){a(Pa(e)),a(Aa(e.id))};return c.a.createElement(Wn.a,{transitionName:{enter:Bn.a.enter,enterActive:Bn.a.enterActive,leave:Bn.a.leave,leaveActive:Bn.a.leaveActive,appear:Bn.a.appear,appearActive:Bn.a.appearActive},transitionEnterTimeout:500,transitionLeaveTimeout:300},c.a.createElement("div",{className:Dn.a.container,id:"postsList"},t.map(function(e){return c.a.createElement(zn,{key:e.id,post:e,open:n})})))})),qn=function(e){var t=e.posts;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Kn,{isLoading:!t,posts:t}),c.a.createElement(Mn,null))},Qn=za(Va),Xn=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0,compilationsPage:!0},a.goToCompilationsPage=function(){return a.setState({compilationsPage:!0})},a.goToSavedPosts=function(){return a.setState({compilationsPage:!1})},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch(ba()).then(function(){return e.setState({isLoading:!1})}).catch(function(){return e.setState({isLoading:!1})})}},{key:"render",value:function(){var e=this.props.savedPosts,t=this.state.compilationsPage;return c.a.createElement(c.a.Fragment,null,t&&c.a.createElement(Qn,{isLoading:this.state.isLoading,goToSavedPosts:this.goToSavedPosts}),!t&&e&&c.a.createElement(c.a.Fragment,null,c.a.createElement(mt.a,{className:ga.a.compilationsLabel,onClick:this.goToCompilationsPage},"Compilations"),c.a.createElement(qn,{posts:e})))}}]),t}(c.a.PureComponent),Zn=Object(St.a)(function(e){return{savedPosts:e.posts.savedPosts}})(Xn),Gn=a(441),Jn=a.n(Gn),Yn=function(){return c.a.createElement(ja,{icon:c.a.createElement("div",{className:Jn.a.eye}),text:"Marks"},c.a.createElement("span",null,"Here you can see the photos in which you are marked"))},$n=a(442),er=a.n($n),tr=function(){return c.a.createElement(ja,{icon:c.a.createElement("div",{className:er.a.pictureIcon}),text:"Posts"},c.a.createElement("span",null,"Pictures are not yet post"))},ar=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).state={isPrivate:!1},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.id;(0,t.dispatch)(function(e){return function(t){return new Promise(function(a,n){yt.get("/api/v1/posts?owner_id="+e).then(function(e){var n=e.data;if(n.private)return a({isPrivate:!0});t(Na(n.data)),a({isPrivate:!1})}).catch(function(e){return n(e)})})}}(a)).then(function(t){var a=t.isPrivate;return e.setState({isPrivate:a})})}},{key:"render",value:function(){var e=this.props.posts,t=this.state.isPrivate;return c.a.createElement(c.a.Fragment,null,t?c.a.createElement("span",null,"Private"):c.a.createElement(c.a.Fragment,null,e&&!e.length&&c.a.createElement(tr,null),c.a.createElement(qn,{posts:e})))}}]),t}(c.a.PureComponent),nr=Object(St.a)(function(e){return{id:e.users.user.id,posts:e.posts.posts}})(ar),rr=_a.a.TabPane,or=Object(St.a)(function(e){return{me:e.users.user.id===e.auth.user.id}})(function(e){var t=e.me;return c.a.createElement("div",{className:ha.a.navigationContainer},c.a.createElement(_a.a,{defaultActiveKey:"1",className:ha.a.tabsContainer},c.a.createElement(rr,{tab:"Posts",key:"1"},c.a.createElement(nr,null)),c.a.createElement(rr,{tab:"Marks",key:"2"},c.a.createElement(Yn,null)),t&&c.a.createElement(rr,{tab:"Saved",key:"3"},c.a.createElement(Zn,null))))}),ir=function(e){var t=e.loadMedia,a=Object(i.createRef)();return c.a.createElement(mt.a,{onClick:function(){return a.current.click()},htmlType:"button",style:{width:"100%"}},"New",c.a.createElement("input",{type:"file",style:{display:"none"},onChange:t,ref:a}))},cr=function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(ot.a)(t).apply(this,arguments))}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"crop-cont"},c.a.createElement("img",{src:this.props.src,className:"crop-image",alt:""}))}}]),t}(c.a.Component),sr=function(e){var t=e.media;return t.type.match("image")?c.a.createElement(cr,{src:URL.createObjectURL(t)}):c.a.createElement(qa,{src:URL.createObjectURL(t)})},lr=a(283),ur=a.n(lr);var mr=function(e){var t,a,n,r={},o=1,i=4,c=50,s=200,l=200,u=0,m=0,p=0,d=0,f=null;function v(){if(e.dataset.isCrop)throw"image is already crop";e.dataset.isCrop="true",e.classList.add("crop-blur"),e.draggable=!1,(n=new Image).crossOrigin=e.crossOrigin,n.src=e.src,n.draggable=!1,f=document.createElement("canvas"),(t=document.createElement("div")).classList.add("crop-component"),(a=document.createElement("div")).classList.add("overlay"),t.appendChild(a),e.parentNode.appendChild(t),t.appendChild(n),t.appendChild(e),a.appendChild(n),h(e.offsetWidth/2-s/2,e.offsetHeight/2-l/2),a.addEventListener("mousedown",y,!1),a.addEventListener("touchstart",y,!1),a.addEventListener("wheel",g,!1),document.addEventListener("keypress",E,!1)}function h(e,t){u=-e*o,m=-t*o,e=-e+"px",t=-t+"px",n.style.top=t,n.style.left=e}function _(e,t){t=t+s/2+"px",e=e+l/2+"px",a.style.top=t,a.style.left=e}function b(e){e=e*Math.PI*2;var t,r,i,l,u,m,p=Math.floor(a.clientWidth+e),d=Math.floor(a.clientHeight+e),f=n.clientWidth,v=n.clientHeight;p<c||p>f||(i=(t=a.offsetLeft-e/2)+p,l=(r=a.offsetTop-e/2)+d,t<0&&(t=0),r<0&&(r=0),i>f||l>v||(o=s/p,u=p,m=p,a.style.width=u+"px",a.style.height=m+"px",h(t,r),_(t,r),C()))}function E(e){switch(e.preventDefault(),String.fromCharCode(e.charCode)){case"+":b(i);break;case"-":b(-i)}}function g(e){e.preventDefault(),b(e.deltaY>0?1:-1)}function y(e){e.preventDefault(),e.stopPropagation(),function(e){r.container_width=a.offsetWidth,r.container_height=a.offsetHeight,r.container_left=a.offsetLeft,r.container_top=a.offsetTop,r.mouse_x=(e.clientX||e.pageX||e.touches&&e.touches[0].clientX)+window.scrollX,r.mouse_y=(e.clientY||e.pageY||e.touches&&e.touches[0].clientY)+window.scrollY}(e),document.addEventListener("mousemove",j),document.addEventListener("touchmove",j),document.addEventListener("mouseup",O),document.addEventListener("touchend",O)}function O(e){e.preventDefault(),document.removeEventListener("mouseup",O),document.removeEventListener("touchend",O),document.removeEventListener("mousemove",j),document.removeEventListener("touchmove",j)}function j(e){var t,o,i,c,s={};e.stopPropagation(),s.x=e.pageX||e.touches&&e.touches[0].pageX,s.y=e.pageY||e.touches&&e.touches[0].pageY,t=s.x-(r.mouse_x-r.container_left),o=s.y-(r.mouse_y-r.container_top),i=a.offsetWidth,c=a.offsetHeight,t<0?t=0:t>n.offsetWidth-i&&(t=n.offsetWidth-i),o<0?o=0:o>n.offsetHeight-c&&(o=n.offsetHeight-c),h(t,o),_(t,o)}function C(){p=n.width*o,d=n.height*o,f.width=s,f.height=l,f.getContext("2d").drawImage(n,u,m,p,d)}return e.complete?v():e.onload=function(){v()},function(){C();try{return f.toDataURL("image/png",1)}catch(e){alert(e)}finally{a.removeEventListener("mousedown",y),a.removeEventListener("touchstart",y),a.removeEventListener("wheel",g),document.removeEventListener("mouseup",O),document.removeEventListener("touchend",O),document.removeEventListener("mousemove",j),document.removeEventListener("touchmove",j),document.removeEventListener("keypress",E)}}},pr=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).inputRef=Object(i.createRef)(),a.state={getCroppedImage:void 0},a.b64toBlob=function(e,t,a){t=t||"",a=a||512;for(var n=atob(e),r=[],o=0;o<n.length;o+=a){for(var i=n.slice(o,o+a),c=new Array(i.length),s=0;s<i.length;s++)c[s]=i.charCodeAt(s);var l=new Uint8Array(c);r.push(l)}return new Blob(r,{type:t})},a.submit=function(){var e=a.state.getCroppedImage(),t=e.split(";"),n=t[0].split(":")[1];console.log(n);var r=t[1].split(",")[1];a.b64toBlob(r,n);fetch(e).then(function(e){return e.blob()}).then(function(e){var t=new FormData;t.append("media",new File([e],"media",{type:"image/jpeg"})),t.append("caption",a.inputRef.current.value),a.props.upload(t)})},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"componentDidMount",value:function(){var e=mr(document.querySelector(".crop-image"));this.setState({getCroppedImage:e})}},{key:"render",value:function(){var e=this.props,t=(e.upload,e.form,e.media),a=e.currentAuthUsername;return c.a.createElement(c.a.Fragment,null,t&&c.a.createElement("div",{className:ur.a.mainContainer},c.a.createElement(sr,{media:t}),c.a.createElement("div",{className:ur.a.sideContainer},c.a.createElement(nn,{username:a}),c.a.createElement("input",{ref:this.inputRef}),c.a.createElement(mt.a,{type:"primary",htmlType:"submit",onClick:this.submit},"Submit"))))}}]),t}(c.a.Component),dr=Object(St.a)(function(e){return{currentAuthUsername:e.auth.user.username}})(pr),fr=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1,media:void 0},a.closeModal=function(){a.setState({isOpen:!1})},a.loadMedia=function(e){a.setState({isOpen:!0,media:e.target.files[0]})},a.upload=function(e){a.props.dispatch(Ma(e)).then(function(e){return Nt.message.success(e.message)}).catch(function(e){return Nt.message.error(e.response.data.message)}),a.closeModal()},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isOpen,a=e.media;return c.a.createElement(c.a.Fragment,null,t&&c.a.createElement(Ka,{closeModal:this.closeModal},c.a.createElement(dr,{media:a,upload:this.upload})),c.a.createElement(ir,{loadMedia:this.loadMedia}))}}]),t}(c.a.Component),vr=Object(St.a)()(fr),hr=a(80),_r=a.n(hr),br=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).fileRef=Object(i.createRef)(),a.state={media:void 0},a.loadMedia=function(e){a.setState({media:e.target.files[0]},a.uploadAvatar)},a.uploadAvatar=function(){var e=new FormData;e.append("avatar",a.state.media),a.props.dispatch(Jt(e)).then(function(e){return Nt.message.success(e.message)}).catch(function(e){return Nt.message.error(e.response.data.message)})},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("button",{className:_r.a.avatarActionButton,onClick:function(){return e.fileRef.current.click()}},c.a.createElement(st.a,{type:"upload"}),c.a.createElement("input",{type:"file",style:{display:"none"},onChange:this.loadMedia,ref:this.fileRef}))}}]),t}(c.a.Component),Er=Object(St.a)()(br),gr=Object(St.a)()(function(e){var t=e.dispatch;return c.a.createElement("button",{className:_r.a.avatarActionButton,onClick:function(){t(Yt())}},c.a.createElement(st.a,{type:"delete"}))}),yr=Object(St.a)(function(e){return{me:e.users.user.id===e.auth.user.id}})(function(e){var t=e.avatar,a=e.me;return c.a.createElement(c.a.Fragment,null,a&&c.a.createElement("div",{className:_r.a.buttonsContainer},c.a.createElement(Er,null),t&&c.a.createElement(gr,null)))}),Or=function(e){var t=e.avatar;return c.a.createElement("div",{className:_r.a.avatarContainer},t?c.a.createElement("img",{className:_r.a.avatar,alt:"Avatar",src:t}):c.a.createElement("div",{className:_r.a.avatar},c.a.createElement(an,{avatar:t})),c.a.createElement(yr,{avatar:t}))},jr=a(284),Cr=a.n(jr);function kr(e){return function(t){return new Promise(function(a,n){yt.post("/api/v1/friendships/follow",e).then(function(){return t({type:X,payload:e});var e}).catch(function(e){return n(e)})})}}function wr(e){return function(t){return new Promise(function(a,n){yt.post("/api/v1/friendships/unfollow",e).then(function(){return t({type:Z})}).catch(function(e){return n(e)})})}}var Sr=Object(St.a)(function(e){return{id:e.users.user.id,isFollows:e.users.user.isFollows}},function(e){return Object(s.b)({follow:kr,unfollow:wr},e)})(function(e){var t=e.id,a=e.isFollows,n=e.follow,r=e.unfollow;return c.a.createElement(mt.a,{size:"small",onClick:function(){return a?r({id:t}):n({id:t})}},a?"Unollow":"Follow")}),Nr=a(1014),Pr=a(109),Lr=a.n(Pr),xr=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1},a.actionLogout=function(){a.setState({isLoading:!0}),a.props.dispatch(function(e){return yt.post("/api/v1/auth/logout",{refreshToken:localStorage.getItem("refreshToken")}).then(function(){return e(ht())})}).then(function(){return a.setState({isLoading:!1})}).catch(function(){return a.setState({isLoading:!1})})},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:Lr.a.logoutContainer},c.a.createElement("button",{className:Lr.a.logout,onClick:this.actionLogout},"Logout"),this.state.isLoading&&c.a.createElement(st.a,{type:"loading"}))}}]),t}(c.a.Component),Tr=Object(St.a)()(xr),Ar=a(1013),Ir=Object(St.a)(function(e){return{isPrivate:e.auth.user.private}})(function(e){var t=e.isPrivate,a=e.dispatch;return c.a.createElement("ul",{className:Lr.a.settingsContainer},c.a.createElement("li",null,c.a.createElement(Pt.a,{to:"/posts/archive"},"Archive")),c.a.createElement("li",null,c.a.createElement(Pt.a,{to:"/posts/liked"},"Liked")),c.a.createElement("li",null,c.a.createElement(Pt.a,{to:"/account/blacklist"},"Blacklist")),c.a.createElement("li",{style:{display:"inline-flex",alignItems:"center"}},c.a.createElement("span",null,"Private account"),c.a.createElement(Ar.a,{defaultChecked:!!t,size:"small",onChange:function(e){a(e?$t():ea()).then(function(e){return Nt.message.success(e)}).catch(function(e){return Nt.message.success(e)})}})),c.a.createElement(Tr,null))}),Mr=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(st.a,{type:"setting",onClick:this.showDrawer,className:Lr.a.settingsButton}),c.a.createElement(Nr.a,{title:c.a.createElement(Fr,null),placement:"right",closable:!1,onClose:this.onClose,visible:this.state.visible},c.a.createElement(Ir,null)))}}]),t}(c.a.Component),Fr=function(){return c.a.createElement("div",null,c.a.createElement(st.a,{type:"setting"}),c.a.createElement("span",{style:{marginLeft:10}},"Settings"))},Dr=Mr,Rr=a(159),Br=a.n(Rr),Vr=function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(ot.a)(t).apply(this,arguments))}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.props,t=e.label,a=e.onChange,n=e.defaultValue;return c.a.createElement("div",{className:Br.a.group},c.a.createElement("input",{type:"text",required:!0,defaultValue:n,onChange:a}),c.a.createElement("span",{className:Br.a.highlight}),c.a.createElement("span",{className:Br.a.bar}),c.a.createElement("label",{className:Br.a.label},t))}}]),t}(c.a.Component),Ur=function(e){var t=e.getFieldDecorator,a=e.fieldName,n=void 0===a?"username":a,r=e.initialValue,o=void 0===r?"":r;return c.a.createElement(Tt.a,null,t(n,{rules:[{required:!0,message:"Please input your username!"},{max:16,message:"Username must be less than 16 characters!"},{min:1,message:"Username must be at least 2 characters!"},{pattern:/^[a-zA-Z0-9]+$/,message:"Invalid username"}],initialValue:o})(c.a.createElement(Vr,{defaultValue:o,label:"Username"})))};var zr=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).isUnique=function(){a.props.form.validateFields(function(e,t){var n=t.username;e||function(e){return new Promise(function(t,a){yt.get("/api/v1/users/unique?username="+e).then(function(e){var a=e.data;t(a)}).catch(function(e){return a(e.response.data)})})}(n).then(function(e){var t=e.unique,r=e.message;a.sett(t,r,n)}).catch(function(e){var t=e.unique,r=e.message;a.sett(t,r,n)})})},a.sett=function(e,t,n){e?(0,a.props.dispatch)({type:Ie,payload:n}):a.props.form.setFields({username:{errors:[new Error(t)]}})},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.props,t=e.username,a=e.form;return c.a.createElement(c.a.Fragment,null,c.a.createElement(ut.a,{onChange:this.isUnique},c.a.createElement(Ur,{getFieldDecorator:a.getFieldDecorator,initialValue:t})))}}]),t}(c.a.Component),Hr=Object(St.a)()(ut.a.create()(zr)),Wr=function(e){var t=e.getFieldDecorator,a=e.fieldName,n=void 0===a?"bio":a,r=e.initialValue,o=void 0===r?"":r;return c.a.createElement(Tt.a,null,t(n,{rules:[{max:100,message:"Bio must be less than 100 characters!"}],initialValue:o})(c.a.createElement(Vr,{defaultValue:o,label:"Bio"})))},Kr=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).checkValidation=function(){a.props.form.validateFields(function(e,t){var n=t.bio;e||(0,a.props.dispatch)({type:Me,payload:n})})},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.props,t=e.bio,a=e.form;return c.a.createElement(c.a.Fragment,null,c.a.createElement(ut.a,{onChange:this.checkValidation},c.a.createElement(Wr,{getFieldDecorator:a.getFieldDecorator,initialValue:t})))}}]),t}(c.a.Component),qr=Object(St.a)()(ut.a.create()(Kr)),Qr=function(e){var t=e.getFieldDecorator,a=e.fieldName,n=void 0===a?"site":a,r=e.initialValue,o=void 0===r?"":r;return c.a.createElement(Tt.a,null,t(n,{rules:[{max:50,message:"Site address must be less than 50 characters!"}],initialValue:o})(c.a.createElement(Vr,{defaultValue:o,label:"Site"})))},Xr=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).checkValidation=function(){a.props.form.validateFields(function(e,t){var n=t.site;e||(0,a.props.dispatch)({type:Fe,payload:n})})},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.props,t=e.site,a=e.form;return c.a.createElement(c.a.Fragment,null,c.a.createElement(ut.a,{onChange:this.checkValidation},c.a.createElement(Qr,{getFieldDecorator:a.getFieldDecorator,initialValue:t})))}}]),t}(c.a.Component),Zr=Object(St.a)()(ut.a.create()(Xr)),Gr=a(155),Jr=a.n(Gr),Yr=a(443),$r=a.n(Yr),eo=Object(St.a)(function(e){return{user:e.auth.user}})(function(e){var t=e.user;return c.a.createElement("div",{className:Jr.a.editContainer},c.a.createElement(Wn.a,{transitionName:$r.a,transitionAppear:!0,transitionAppearTimeout:500,transitionEnter:!1,transitionLeave:!1,style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"}},c.a.createElement(Hr,{username:t.username}),c.a.createElement(qr,{bio:t.bio}),c.a.createElement(Zr,{site:t.site}),c.a.createElement(mt.a,{size:"small",type:"primary"},"Save")))}),to=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).submit=function(){var e=a.props.dispatch,t=a.getFilterEditedData();Object.keys(t).length?e(Xt(t)).then(function(e){return Nt.message.success(e)}).catch(function(e){return Nt.message.error(e)}):Nt.message.warning("Nothing to update")},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!1}},{key:"getFilterEditedData",value:function(){var e=this.props,t=e.editedData,a=e.user;return Object.entries(t).forEach(function(e){e[1]&&a[e[0]]!==e[1]||delete t[e[0]]}),t}},{key:"render",value:function(){return console.log("re-render"),c.a.createElement("div",{className:Jr.a.editTitle},c.a.createElement(st.a,{type:"left"}),c.a.createElement("span",{style:{marginLeft:15}},"Edit profile"),c.a.createElement(st.a,{className:Jr.a.editTitleCheck,type:"check",onClick:this.submit}))}}]),t}(c.a.Component),ao=Object(St.a)(function(e){return{editedData:{username:e.edit.username,bio:e.edit.bio,site:e.edit.site},user:e.auth.user}})(to),no=a(203),ro=a.n(no),oo=a(196),io=a.n(oo),co=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).closeByCoverClick=function(e){"transition"===e.target.id&&a.props.onClose()},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.title;return Object($e.createPortal)(c.a.createElement("div",{id:"drawer",className:ro.a.drawerContainer,onClick:this.closeByCoverClick},c.a.createElement(Wn.a,{id:"transition",className:ro.a.transitionContainer,transitionName:io.a,transitionAppear:!0,transitionAppearTimeout:250,transitionEnter:!1,transitionLeaveTimeout:500},c.a.createElement("div",{className:ro.a.wrapper},a,t))),document.body)}}]),t}(c.a.Component),so=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.state.visible;return c.a.createElement(c.a.Fragment,null,c.a.createElement(mt.a,{size:"small",onClick:this.showDrawer,style:{marginRight:"10px"}},"Edit"),e&&c.a.createElement(co,{title:c.a.createElement(ao,null),onClose:this.onClose},c.a.createElement(eo,null)))}}]),t}(c.a.Component),lo=Object(St.a)(function(e){return{userId:e.users.user.id,username:e.users.user.username,blacklisted:e.users.user.blacklisted}})(function(e){var t=e.closeModal,a=e.dispatch,n=e.userId,r=e.username,o=e.blacklisted;return c.a.createElement(En,null,c.a.createElement("li",null,"Complain"),o?c.a.createElement("li",{onClick:function(){a(na(n)).then(function(e){return Nt.message.success(e)})}},"Remove from blacklist"):c.a.createElement("li",{onClick:function(){a(aa({id:n})).then(function(e){return Nt.message.success(e)})}},"Add to blacklist"),c.a.createElement("li",{onClick:function(){var e=document.createElement("textarea");e.value="".concat(window.location.origin,"/").concat(r),e.setAttribute("readonly",""),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),Nt.message.success("Link copied to clipboard")}},"Copy link"),c.a.createElement("li",{onClick:t},"Cancel"))}),uo=a(444),mo=a.n(uo),po=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1},a.closeModal=function(){a.setState({isOpen:!1})},a.open=function(){a.setState({isOpen:!0})},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.state.isOpen;return c.a.createElement(c.a.Fragment,null,e&&c.a.createElement(Ka,{closeModal:this.closeModal},c.a.createElement(lo,{closeModal:this.closeModal})),c.a.createElement(fo,{open:this.open}))}}]),t}(c.a.PureComponent),fo=function(e){var t=e.open;return c.a.createElement("button",{className:mo.a.actionsButton,onClick:t},c.a.createElement(st.a,{type:"ellipsis",style:{marginLeft:10}}))},vo=po,ho=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(so,null),c.a.createElement(Dr,null))},_o=Object(St.a)(function(e){return{me:e.auth.user.id===e.users.user.id}})(function(e){var t=e.me;return c.a.createElement(c.a.Fragment,null,t?c.a.createElement(ho,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(Sr,null),c.a.createElement(vo,null)))}),bo=function(e){var t=e.username;return c.a.createElement("div",{className:Cr.a.directionContainer},c.a.createElement("span",{className:Cr.a.username},t),c.a.createElement(_o,null))},Eo=a(73),go=a.n(Eo),yo=a(136),Oo=a.n(yo),jo=function(e){var t=e.user;return c.a.createElement("li",{className:Oo.a.cardContainer},t.avatar?c.a.createElement("img",{src:t.avatar,alt:"avatar",className:Oo.a.avatar}):c.a.createElement("div",{className:Oo.a.avatar},c.a.createElement(an,{fontSize:"20px"})),c.a.createElement("span",null,t.username))},Co=function(e){var t=e.closeModal,a=e.friendships;return c.a.createElement(Ka,{closeModal:t},c.a.createElement("input",null),c.a.createElement("ul",{className:Oo.a.friendshipsContainer},a.map(function(e){return c.a.createElement(jo,{key:e.id,user:e})})))},ko=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).state={isModalOpen:!1,friendships:void 0},a.closeFriendshipsModal=function(){a.setState({isModalOpen:!1})},a.loadFollowers=function(){return a.load(Zt,a.props.followersCount)},a.loadFollows=function(){return a.load(Gt,a.props.followsCount)},a.load=function(e,t){var n=a.props,r=n.dispatch,o=n.id,i=n.canSee;t&&i&&r(e(o)).then(function(e){var t=e.friendships;return a.setState({isModalOpen:!0,friendships:t})})},a.isOpen=function(){var e=a.state,t=e.isModalOpen,n=e.friendships;return!!(t&&n&&n.length)},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"componentDidMount",value:function(){pn("userInfoPostsLink")}},{key:"render",value:function(){var e=this.props,t=e.postsCount,a=e.followersCount,n=e.followsCount,r=this.state.friendships;return c.a.createElement(c.a.Fragment,null,c.a.createElement("ul",{className:go.a.mainContainer},c.a.createElement("li",{className:go.a.unitContainer},c.a.createElement("span",{className:go.a.unitNumber},t),c.a.createElement("a",{className:go.a.simpleTextStyledItem,id:"userInfoPostsLink",href:"#postsList"},"Posts")),c.a.createElement("li",{className:go.a.unitContainer},c.a.createElement("span",{className:go.a.unitNumber},a),c.a.createElement("button",{className:go.a.simpleTextStyledItem,onClick:this.loadFollowers},"Followers")),c.a.createElement("li",{className:go.a.unitContainer},c.a.createElement("span",{className:go.a.unitNumber},n),c.a.createElement("button",{className:go.a.simpleTextStyledItem,onClick:this.loadFollows},"Follows"))),this.isOpen()&&c.a.createElement(Co,{friendships:r,closeModal:this.closeFriendshipsModal}))}}]),t}(c.a.Component),wo=Object(St.a)()(ko),So=a(285),No=a.n(So),Po=Object(St.a)(function(e){return{user:e.users.user,me:e.auth.user.id===e.users.user.id}})(function(e){var t=e.user;return c.a.createElement("div",{className:No.a.mainContainer},c.a.createElement(Or,{avatar:t.avatar}),c.a.createElement("div",{className:No.a.directionInfoContainer},c.a.createElement(bo,{username:t.username}),c.a.createElement(wo,{id:t.id,postsCount:t.posts_count,followsCount:t.follows_count,followersCount:t.followers_count,canSee:t.canSee}),c.a.createElement("span",null,t.bio),c.a.createElement("a",null,t.site)))}),Lo=function(){return c.a.createElement(ja,{icon:c.a.createElement(st.a,{type:"lock",style:{fontSize:21}}),text:"Private"},c.a.createElement("span",null,"Only followers can see content"))},xo=za(Object(St.a)(function(e){return{me:e.auth.user.id===e.users.user.id,canSee:e.users.user.canSee}})(function(e){var t=e.me,a=e.canSee;return c.a.createElement("div",{className:ca.a.userPageContainer},c.a.createElement(Po,null),a?c.a.createElement(c.a.Fragment,null,c.a.createElement(fa,{stories:[{src:"https://www.itsnicethat.com/system/files/112017/5a0c24617fa44c187f000efc/index_default/Chris-(Simpsons-Artist)-The-Story-of-Life-publication-itsnicethat-list.png?1510746521"},{src:"https://www.storynory.com/wp-content/uploads/2018/01/pot-of-broth-storynory-600-600x400.jpg",name:"Stoory"}]}),t&&c.a.createElement(vr,null),c.a.createElement(or,null)):c.a.createElement(Lo,null))})),To=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0,error:""},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"componentDidMount",value:function(){var e,t=this,a=this.props,n=a.match;(0,a.dispatch)((e=n.params.username,function(t){return new Promise(function(a,n){yt.get("/api/v1/users?username="+e).then(function(e){var n=e.data;t(Qt(n)),a()}).catch(function(e){return n(e)})})})).then(function(){return t.setState({isLoading:!1})}).catch(function(e){return t.setState({isLoading:!1,error:e.response.data.message})})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.error;return c.a.createElement("div",{className:oa.a.container},a?c.a.createElement("span",null,a):c.a.createElement(xo,{isLoading:t}))}}]),t}(c.a.Component),Ao=Object(St.a)()(To),Io=a(445),Mo=a.n(Io);var Fo=a(112),Do=a.n(Fo),Ro=c.a.memo(function(e){var t=e.post,a=e.comments,n=e.open;return c.a.createElement("article",{className:Do.a.item},c.a.createElement(nn,{username:t.owner,avatar:t.avatar}),c.a.createElement("div",{className:Do.a.mediaContainer,onClick:function(){return n(t)}},t.src.match(".mp4")?c.a.createElement("video",{src:t.src,className:Do.a.media}):c.a.createElement("img",{alt:"user's post",className:Do.a.media,src:t.src})),c.a.createElement(vn,{post:t}),a&&c.a.createElement("div",{style:{fontSize:10}},c.a.createElement(Tn,{comments:a})),c.a.createElement(Sn,{post:t}))});function Bo(e,t){var a=[];return e.forEach(function(e){e.post_id===t.post.id&&a.push(e)}),a}var Vo=Object(St.a)(function(e,t){return{comments:Bo(e.comments.comments,t)}})(Ro),Uo=Object(St.a)()(function(e){var t=e.posts,a=e.dispatch,n=function(e){a(Pa(e)),a(Aa(e.id))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:Do.a.feedList},c.a.createElement(Wn.a,{transitionName:io.a,transitionAppear:!0,transitionAppearTimeout:500,transitionEnter:!1,transitionLeaveTimeout:300},t.map(function(e){return c.a.createElement(Vo,{key:e.id,post:e,open:n})}))),c.a.createElement(Mn,null))}),zo=function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(ot.a)(t).apply(this,arguments))}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(function(e){return new Promise(function(t,a){yt.get("/api/v1/feed").then(function(t){var a=t.data;e(Na(a.data)),e(Ta(a.comments))}).catch(function(e){return a(e)})})})}},{key:"render",value:function(){var e=this.props.posts;return c.a.createElement(c.a.Fragment,null,e?c.a.createElement(Uo,{posts:e}):c.a.createElement("span",null,"Loading"))}}]),t}(c.a.Component),Ho=Object(St.a)(function(e){return{posts:e.posts.posts}})(zo),Wo=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:Mo.a.container},c.a.createElement(Ho,null)))},Ko=function(e){var t=e.getFieldDecorator,a=e.initialValue;return c.a.createElement(Tt.a,null,t("email",{rules:[{type:"email",message:"The input is not valid Email!"},{required:!0,message:"Please input your Email!"}],initialValue:a})(c.a.createElement(xt.a,{prefix:c.a.createElement(st.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"})))};Ko.defaultProps={initialValue:null};var qo=Ko,Qo=function(e){var t=e.getFieldDecorator,a=e.validator,n=e.onBlur;return c.a.createElement(Tt.a,null,t("confirm",{rules:[{required:!0,message:"Please confirm your password!"},{validator:a}]})(c.a.createElement(xt.a,{prefix:c.a.createElement(st.a,{type:"eye",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Confirm password",onBlur:n})))},Xo=a(446),Zo=a.n(Xo),Go=function(e){function t(e){var a;return Object(at.a)(this,t),(a=Object(rt.a)(this,Object(ot.a)(t).call(this,e))).state={confirmDirty:!1,loading:!1},a.handleSubmit=a.handleSubmit.bind(Object(ct.a)(Object(ct.a)(a))),a.handleConfirmBlur=a.handleConfirmBlur.bind(Object(ct.a)(Object(ct.a)(a))),a.compareToFirstPassword=a.compareToFirstPassword.bind(Object(ct.a)(Object(ct.a)(a))),a.validateToNextPassword=a.validateToNextPassword.bind(Object(ct.a)(Object(ct.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(ct.a)(Object(ct.a)(a))),a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props,n=a.register,r=a.form,o=a.history;r.validateFieldsAndScroll(function(e,a){var r=a.email,i=a.username,c=a.password,s=a.confirm;e||(t.setState({loading:!0}),n({email:r,username:i,password:c,password_confirmation:s}).then(function(e){Nt.message.success(e.message),t.setState({loading:!1}),o.push("/")}).catch(function(e){t.setState({loading:!1}),Nt.message.error(e.message)}))})}},{key:"handleConfirmBlur",value:function(e){var t=e.target.value;this.setState({confirmDirty:this.state.confirmDirty||!!t})}},{key:"compareToFirstPassword",value:function(e,t,a){var n=this.props.form;t&&t!==n.getFieldValue("password")?a("Two passwords that you enter is inconsistent!"):a()}},{key:"validateToNextPassword",value:function(e,t,a){var n=this.props.form;t&&this.state.confirmDirty&&n.validateFields(["confirm"],{force:!0}),a()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=c.a.createElement(st.a,{type:"loading",style:{fontSize:24},spin:!0});return c.a.createElement(lt.a,{spinning:this.state.loading,indicator:t,delay:150},c.a.createElement("h1",{style:{textAlign:"center"}},"Register"),c.a.createElement(ut.a,{onSubmit:this.handleSubmit},c.a.createElement(qo,{getFieldDecorator:e}),c.a.createElement(Dt,{getFieldDecorator:e}),c.a.createElement(It,{getFieldDecorator:e,validator:this.validateToNextPassword}),c.a.createElement(Qo,{getFieldDecorator:e,validator:this.compareToFirstPassword,onBlur:this.handleConfirmBlur}),c.a.createElement(Tt.a,null,c.a.createElement("div",{className:Zo.a.registerLoginContainer},c.a.createElement(mt.a,{type:"primary",htmlType:"submit"},"Register"),c.a.createElement(Pt.a,{to:"/"},"Log in")))))}}]),t}(c.a.Component),Jo=function(e){return Object(s.b)({register:wt},e)},Yo=function(){var e=ut.a.create()(Object(St.a)(null,Jo)(Object(Lt.a)(Go)));return c.a.createElement(qt,null,c.a.createElement(e,null))},$o=a(286),ei=a.n($o),ti=ut.a.Item,ai=function(e){function t(e){var a;return Object(at.a)(this,t),(a=Object(rt.a)(this,Object(ot.a)(t).call(this,e))).state={loading:!1},a.handleSubmit=a.handleSubmit.bind(Object(ct.a)(Object(ct.a)(a))),a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props,n=a.form,r=a.resetPassword;n.validateFields(function(e,a){var n=a.email;e||(t.setState({loading:!0}),r({email:n}).then(function(e){t.setState({loading:!1}),Nt.message.success(e)}).catch(function(e){t.setState({loading:!1}),Nt.message.error(e)}))})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.loading,a=c.a.createElement(st.a,{type:"loading",style:{fontSize:24},spin:!0});return c.a.createElement(lt.a,{spinning:t,indicator:a,delay:150},c.a.createElement("h1",{style:{textAlign:"center"}},"Reset password"),c.a.createElement(ut.a,{onSubmit:this.handleSubmit},c.a.createElement(qo,{getFieldDecorator:e}),c.a.createElement(ti,null,c.a.createElement(mt.a,{type:"primary",htmlType:"submit",className:ei.a.submit},"Reset"),c.a.createElement("div",{className:ei.a.loginRegisterContainer},c.a.createElement(Pt.a,{to:"/"},"Log in"),c.a.createElement(Pt.a,{to:"/register"},"Register")))))}}]),t}(c.a.Component),ni=function(e){return Object(s.b)({resetPassword:Ct},e)},ri=function(){var e=ut.a.create()(Object(St.a)(null,ni)(ai));return c.a.createElement(qt,null,c.a.createElement(e,null))},oi=a(287),ii=a.n(oi),ci=function(e){function t(e){var a;return Object(at.a)(this,t),(a=Object(rt.a)(this,Object(ot.a)(t).call(this,e))).state={loading:!1},a.handleSubmit=a.handleSubmit.bind(Object(ct.a)(Object(ct.a)(a))),a.handleConfirmBlur=a.handleConfirmBlur.bind(Object(ct.a)(Object(ct.a)(a))),a.compareToFirstPassword=a.compareToFirstPassword.bind(Object(ct.a)(Object(ct.a)(a))),a.validateToNextPassword=a.validateToNextPassword.bind(Object(ct.a)(Object(ct.a)(a))),a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props,n=a.form,r=a.updatePassword,o=a.match,i=a.history;n.validateFields(function(e,a){var n=a.password,c=a.confirm;e||(t.setState({loading:!0}),r({email:o.params.email.replace("29gnmLTv686QsnV","@"),token:o.params.token,password_confirmation:c,password:n}).then(function(e){t.setState({loading:!1}),Nt.message.success(e),i.push("/")}).catch(function(e){t.setState({loading:!1}),Nt.message.error(e.message)}))})}},{key:"handleConfirmBlur",value:function(e){var t=e.target.value;this.setState({confirmDirty:this.state.confirmDirty||!!t})}},{key:"compareToFirstPassword",value:function(e,t,a){var n=this.props.form;t&&t!==n.getFieldValue("password")?a("Two passwords that you enter is inconsistent!"):a()}},{key:"validateToNextPassword",value:function(e,t,a){var n=this.props.form;t&&this.state.confirmDirty&&n.validateFields(["confirm"],{force:!0}),a()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=c.a.createElement(st.a,{type:"loading",style:{fontSize:24},spin:!0});return c.a.createElement(lt.a,{spinning:this.state.loading,indicator:t,delay:150},c.a.createElement("h1",{style:{textAlign:"center"}},"Reset password"),c.a.createElement(ut.a,{onSubmit:this.handleSubmit},c.a.createElement(qo,{getFieldDecorator:e,initialValue:this.props.match.params.email.replace("29gnmLTv686QsnV","@")}),c.a.createElement(It,{getFieldDecorator:e,validator:this.validateToNextPassword}),c.a.createElement(Qo,{getFieldDecorator:e,validator:this.compareToFirstPassword,onBlur:this.handleConfirmBlur}),c.a.createElement(Tt.a,null,c.a.createElement(mt.a,{type:"primary",htmlType:"submit",className:ii.a.submit},"Reset"),c.a.createElement("div",{className:ii.a.loginRegisterContainer},c.a.createElement(Pt.a,{to:"/"},"Log in"),c.a.createElement(Pt.a,{to:"/register"},"Register")))))}}]),t}(c.a.Component),si=function(e){return Object(s.b)({updatePassword:kt},e)},li=function(e){var t=ut.a.create()(Object(St.a)(null,si)(Object(Lt.a)(ci)));return c.a.createElement(qt,null,c.a.createElement(t,e))},ui=function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(ot.a)(t).apply(this,arguments))}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"componentDidMount",value:function(){var e,t=this.props,a=t.dispatch,n=t.match;a((e=n.params.code,function(t){return new Promise(function(a,n){yt.get("/api/v1/posts/"+e).then(function(e){var a=e.data;t(Pa(a.post)),t(Aa(a.post.id))}).catch(function(e){return n(e)})})}))}},{key:"componentWillUnmount",value:function(){this.props.dispatch(La())}},{key:"render",value:function(){var e=this.props.currentPost;return c.a.createElement(c.a.Fragment,null,e&&c.a.createElement(In,{post:e}))}}]),t}(c.a.Component),mi=Object(St.a)(function(e){return{currentPost:e.posts.currentPost}})(ui),pi=a(288),di=a.n(pi),fi=function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(ot.a)(t).apply(this,arguments))}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(function(e){return new Promise(function(t,a){yt.get("/api/v1/posts/archive").then(function(t){var a=t.data;e(Na(a.data))}).catch(function(e){return a(e)})})})}},{key:"render",value:function(){return c.a.createElement("div",{className:di.a.pageContainer},c.a.createElement("span",{className:di.a.title},"Only you can see archived posts"),c.a.createElement(qn,{posts:this.props.posts}))}}]),t}(c.a.Component),vi=Object(St.a)(function(e){return{posts:e.posts.posts}})(fi),hi=a(289),_i=a.n(hi),bi=function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(ot.a)(t).apply(this,arguments))}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(function(e){return new Promise(function(t,a){yt.get("/api/v1/posts/liked").then(function(t){var a=t.data;e(Na(a.data))}).catch(function(e){return a(e)})})})}},{key:"render",value:function(){return c.a.createElement("div",{className:_i.a.pageContainer},c.a.createElement("span",{className:_i.a.title},"LikedPosts"),c.a.createElement(qn,{posts:this.props.posts}))}}]),t}(c.a.Component),Ei=Object(St.a)(function(e){return{posts:e.posts.posts}})(bi),gi=a(99),yi=a.n(gi),Oi=function(){return c.a.createElement("div",{className:yi.a.avatar},c.a.createElement(st.a,{type:"user",style:{fontSize:"50px"}}))},ji=function(e){var t=e.avatar,a=e.username,n=e.removeUser;return c.a.createElement("div",{className:yi.a.userCard},c.a.createElement("div",{className:yi.a.user},t?c.a.createElement("div",{className:yi.a.avatar,style:{backgroundImage:"url(".concat(t,")")}}):c.a.createElement(Oi,null),c.a.createElement("div",{className:yi.a.usernameWrapper},c.a.createElement("span",{className:yi.a.username},a))),c.a.createElement("button",{className:yi.a.removeButton,onClick:n},"Remove"))},Ci=a(114),ki=a.n(Ci),wi=Object(St.a)()(function(e){var t=e.user,a=e.dispatch;return c.a.createElement(Wn.a,{transitionName:{enter:ki.a.enter,enterActive:ki.a.enterActive,leave:ki.a.leave,leaveActive:ki.a.leaveActive,appear:ki.a.appear,appearActive:ki.a.appearActive},transitionAppear:!0,transitionAppearTimeout:400,transitionEnterTimeout:400,transitionLeave:!0,transitionLeaveTimeout:400},c.a.createElement(ji,{avatar:t.avatar,username:t.username,removeUser:function(){return a(na(t.id))}}))}),Si=a(204),Ni=a.n(Si),Pi=function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(ot.a)(t).apply(this,arguments))}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(ta())}},{key:"render",value:function(){var e=this.props.blacklisted;return c.a.createElement("div",{className:Ni.a.blacklistContainer},c.a.createElement("span",{className:Ni.a.title},"Blacklist"),c.a.createElement("div",{className:Ni.a.cardsList},e&&e.map(function(e){return c.a.createElement(wi,{key:e.id,user:e})})))}}]),t}(c.a.Component),Li=Object(St.a)(function(e){return{blacklisted:e.blacklist.users}})(Pi),xi=[{path:"/",exact:!0,auth:!0,component:Wo},{path:"/",exact:!0,auth:!1,component:qt},{path:"/login",exact:!0,auth:!1,component:qt},{path:"/register",exact:!0,auth:!1,component:Yo},{path:"/password-reset",exact:!0,auth:!1,component:ri},{path:"/:username",exact:!0,auth:!0,component:Ao},{path:"/password-update/:token/:email",exact:!0,auth:!1,component:li},{path:"/p/:code",exact:!0,auth:!0,component:mi},{path:"/posts/archive",exact:!0,auth:!0,component:vi},{path:"/posts/liked",exact:!0,auth:!0,component:Ei},{path:"/account/blacklist",exact:!0,auth:!0,component:Li}],Ti=a(934),Ai=a(452),Ii=a(205),Mi=a.n(Ii),Fi=a(137),Di=a.n(Fi),Ri=function(e){var t=e.user;return c.a.createElement(Pt.a,{to:"/"+t.username,className:Di.a.user},t.avatar?c.a.createElement("img",{className:Di.a.avatar,src:t.avatar}):c.a.createElement("div",{className:Di.a.avatar},c.a.createElement(an,null)),c.a.createElement("span",null,t.username),c.a.createElement("span",null,t.bio))};var Bi=function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(ot.a)(t).apply(this,arguments))}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.props.makeBarInvisible)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.props.makeBarInvisible)}},{key:"render",value:function(){var e=this.props.users;return c.a.createElement("div",{className:Di.a.searchBar,ref:this.props.searchBarRef},e?e.length?e.map(function(e){return c.a.createElement(Ri,{key:e.id,user:e})}):c.a.createElement("span",null,"Nothing to show"):c.a.createElement(st.a,{type:"loading"}))}}]),t}(c.a.Component),Vi=Object(St.a)(function(e){return{users:e.search.users}})(Bi),Ui=a(206),zi=a.n(Ui);function Hi(e){return function(t){return new Promise(function(a,n){yt.get("/api/v1/search?username="+e).then(function(e){var n,r=e.data;t((n=r.data,{type:ye,payload:n})),a()}).catch(function(e){return n(e)})})}}var Wi=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(ot.a)(t)).call.apply(e,[this].concat(r)))).state={barVisible:!1},a.searchBarRef=Object(i.createRef)(),a.search=function(e){var t=a.props.dispatch;a.setState({barVisible:!0}),e.target.value&&t(Hi(e.target.value))},a.makeBarInvisible=function(e){a.searchBarRef.current.contains(e.target)||(a.setState({barVisible:!1}),a.props.dispatch({type:Oe}))},a}return Object(it.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:zi.a.container},c.a.createElement("div",{className:zi.a.search},c.a.createElement("div",{className:zi.a.searchBox},c.a.createElement("input",{type:"text",onChange:this.search}),c.a.createElement("span",null))),this.state.barVisible&&c.a.createElement(Vi,{searchBarRef:this.searchBarRef,makeBarInvisible:this.makeBarInvisible}))}}]),t}(c.a.Component),Ki=Object(St.a)()(Wi),qi=a(447),Qi=a.n(qi),Xi=Object(St.a)(function(e){return{username:e.auth.user.username,avatar:e.auth.user.avatar}})(function(e){var t=e.username,a=e.avatar;return c.a.createElement("div",{className:Mi.a.header},c.a.createElement(Pt.a,{to:"/",style:{marginLeft:20}},c.a.createElement("img",{width:"30",height:"30",src:Qi.a})),c.a.createElement(Ki,null),c.a.createElement(Pt.a,{to:"/"+t,style:{marginRight:20}},a?c.a.createElement("img",{src:a,alt:"avatar",className:Mi.a.avatar}):c.a.createElement("div",{className:Mi.a.avatar},c.a.createElement(an,{fontSize:"20px"}))))}),Zi=function(e){var t=e.children;return c.a.createElement("main",{style:{minHeight:"100%",height:"auto"}},c.a.createElement(Xi,null),t)},Gi=Object(St.a)(function(e){return{isAuthenticated:e.auth.isAuthenticated}})(function(e){var t=e.component,a=e.isAuthenticated,n=Object(pt.a)(e,["component","isAuthenticated"]);return c.a.createElement(Ti.a,Object.assign({},n,{render:function(e){return a?c.a.createElement(Ai.a,{to:{pathname:"/",state:{from:e.location}}}):c.a.createElement(Zi,null,c.a.createElement(t,e))}}))}),Ji=Object(St.a)(function(e){return{isAuthenticated:e.auth.isAuthenticated}})(function(e){var t=e.component,a=e.isAuthenticated,n=Object(pt.a)(e,["component","isAuthenticated"]);return c.a.createElement(Ti.a,Object.assign({},n,{render:function(e){return a?c.a.createElement(Zi,null,c.a.createElement(t,e)):c.a.createElement(qt,null)}}))}),Yi=function(){return c.a.createElement(et.a,null,c.a.createElement(tt.a,null,xi.map(function(e,t){return e.auth?c.a.createElement(Ji,Object.assign({key:t},e)):c.a.createElement(Gi,Object.assign({key:t},e))})))},$i=a(182),ec=a(449),tc=a.n(ec),ac=function(){return c.a.createElement("div",{className:tc.a.container},c.a.createElement("ul",null,c.a.createElement("li",null),c.a.createElement("li",null),c.a.createElement("li",null),c.a.createElement("li",null),c.a.createElement("li",null)))};Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.hasOwnProperty("accessToken")){e.next=4;break}return Object($e.render)(c.a.createElement(ac,null),document.getElementById("root")),e.next=4,Ye.dispatch(function(e){return new Promise(function(t,a){yt.post("/api/v1/auth/me").then(function(a){var n=a.data;e(vt(n.user)),t(n)}).catch(function(e){return a(e)})})}).catch(function(){});case 4:Object($e.render)(c.a.createElement($i.a,{store:Ye},c.a.createElement(Yi,null)),document.getElementById("root"));case 5:case"end":return e.stop()}},e,this)}))(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[457,2,1]]]);
//# sourceMappingURL=main.c956c76a.chunk.js.map