(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{178:function(e,t,a){e.exports={rememberForgotContainer:"login_rememberForgotContainer__3wmGY",loginRegisterContainer:"login_loginRegisterContainer__3WToi",login:"login_login__zJhdY"}},181:function(e,t,a){e.exports={header:"home_header__3ZGQA",container:"home_container__31p8Y",logout:"home_logout__mREXz"}},252:function(e,t,a){e.exports={welcome:"welcome_welcome__11Kmz",card:"welcome_card__3d3Za"}},253:function(e,t,a){e.exports={submit:"forgotPass_submit__1AzMa",loginRegisterContainer:"forgotPass_loginRegisterContainer__29CcY"}},254:function(e,t,a){e.exports={submit:"resetPass_submit__274Zz",loginRegisterContainer:"resetPass_loginRegisterContainer__yVlka"}},395:function(e,t,a){e.exports={registerLoginContainer:"register_registerLoginContainer__Tdr9p"}},398:function(e,t,a){e.exports={container:"loader_container__1gwmP","right-1":"loader_right-1__3kpKV","right-2":"loader_right-2__2X1RC","right-3":"loader_right-3__eyetX","right-4":"loader_right-4__1uCYA","right-5":"loader_right-5__FkRaO"}},405:function(e,t,a){e.exports=a(891)},408:function(e,t,a){},891:function(e,t,a){"use strict";a.r(t);var r=a(118),n=a.n(r),o=a(166);a(408),a(410),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(1),s=a.n(i),c=a(38),l=a(255),u="AUTH_LOGIN",m="AUTH_LOGOUT",d={isAuthenticated:!1,instagramProfiles:[],user:{}},h=function(e,t){return e=Object(l.a)({},e,{isAuthenticated:!0,user:t})},p=function(e){return e=Object(l.a)({},e,{isAuthenticated:!1})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload,n=void 0===r?null:r;switch(a){case u:return h(e,n);case m:return p(e);default:return e}},g=Object(c.c)({auth:f}),b=a(378),v=function(e){return function(e){return function(t){return t.type===m&&(localStorage.removeItem("expiresIn"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")),e(t)}}},E=Object(c.d)(g,Object(c.a)(b.a,v)),w=a(7),y=a(914),O=a(916),j=a(79),_=a(80),S=a(83),k=a(81),P=a(84),x=a(24),T=a(47),F=a(908),C=a(911),D=a(898),N=a(116),R=a(86),A=a.n(R);function I(e){return{type:u,payload:e}}function B(){return{type:m}}var L=a(23),z=a.n(L),V=document.head.querySelector('meta[name="csrf-token"]');A.a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",A.a.defaults.headers.common["X-CSRF-TOKEN"]=V.content,A.a.defaults.headers.common.Authorization="Bearer ".concat(localStorage.getItem("accessToken")),A.a.interceptors.response.use(function(e){return e},function(e){return 401===e.response.status&&E.dispatch(B()),Promise.reject(e)});var q=!1;A.a.interceptors.request.use(function(){var e=Object(o.a)(n.a.mark(function e(t){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(localStorage.hasOwnProperty("expiresIn")&&localStorage.getItem("expiresIn")<z()().format("X"))||q){e.next=6;break}return q=!0,e.next=4,new Promise(function(e,t){X.post("/api/v1/auth/refresh",{refreshToken:localStorage.getItem("refreshToken")}).then(function(t){var a=t.data,r=a.token,n=a.expiresIn,o=a.refreshToken;U(n,r,o),X.defaults.headers.common.Authorization="Bearer ".concat(r),e(a)}).catch(function(e){return t(e)})}).catch(function(){throw new A.a.Cancel});case 4:q=!1,t.headers.Authorization="Bearer ".concat(localStorage.getItem("accessToken"));case 6:return e.abrupt("return",Promise.resolve(t));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());var X=A.a;function U(e,t,a){localStorage.setItem("accessToken",t),localStorage.setItem("expiresIn",e),localStorage.setItem("refreshToken",a)}function Y(e){var t=e.remember,a=Object(N.a)(e,["remember"]);return function(e){return new Promise(function(r,n){X.post("/api/v1/auth/login",a).then(function(a){var r=a.data,n=r.token,o=r.expiresIn,i=r.refreshToken,s=r.user;e(I(s)),t&&U(o,n,i),X.defaults.headers.common.Authorization="Bearer ".concat(n)}).catch(function(e){return n(e)})})}}function G(){return function(e){return X.post("/api/v1/auth/logout",{refreshToken:localStorage.getItem("refreshToken")}).then(function(){return e(B())})}}function H(e){return function(t){return new Promise(function(t,a){X.post("/api/v1/auth/password/reset",e).then(function(e){var a=e.data;return t(a.message)}).catch(function(e){var t=e.response;return a(t.data.message)})})}}function W(e){return function(t){return new Promise(function(t,a){X.post("/api/v1/auth/password/update",e).then(function(e){var a=e.data;return t(a.message)}).catch(function(e){var t={message:e.response.data.message,statusCode:e.response.status};return a(t)})})}}function J(e){return function(t){return new Promise(function(t,a){X.post("/api/v1/auth/register",e).then(function(e){var a=e.data;return t(a)}).catch(function(e){return a(e.response.data)})})}}var K=a(46),Q=a(60),Z=a(909),M=a(915),$=a(912),ee=a(41),te=function(e){var t=e.getFieldDecorator,a=e.fieldName,r=e.validator;return s.a.createElement(ee.a,null,t(a,{rules:[{required:!0,message:"Please input your password!"},{max:32,message:"Password must be less than 32 characters!"},{min:6,message:"Password must be at least 6 characters!"},{validator:r}]})(s.a.createElement($.a,{prefix:s.a.createElement(T.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})))};te.defaultProps={fieldName:"password"};var ae=te,re=a(913),ne=function(e){var t=e.getFieldDecorator,a=e.remember,r=e.onChange;return s.a.createElement(s.a.Fragment,null,t("remember",{valuePropName:"checked",initialValue:a})(s.a.createElement(re.a,{onChange:r},"Remember me")))},oe=function(e){var t=e.getFieldDecorator,a=e.fieldName;return s.a.createElement(ee.a,null,t(a,{rules:[{required:!0,message:"Please input your username!"},{max:16,message:"Username must be less than 16 characters!"},{min:1,message:"Username must be at least 2 characters!"}]})(s.a.createElement($.a,{prefix:s.a.createElement(T.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"})))};oe.defaultProps={fieldName:"username"};var ie=oe,se=a(178),ce=a.n(se),le=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(S.a)(this,Object(k.a)(t).call(this,e))).state={loading:!1,remember:!0},a.handleSubmit=a.handleSubmit.bind(Object(x.a)(Object(x.a)(a))),a.changeRemember=a.changeRemember.bind(Object(x.a)(Object(x.a)(a))),a}return Object(P.a)(t,e),Object(_.a)(t,[{key:"changeRemember",value:function(){this.setState(function(e){return{remember:!e.remember}})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props,r=a.form,n=a.login,o=a.history,i=this.state.remember;r.validateFields(function(e,a){var r=a.username,s=a.password;e||(t.setState({loading:!0}),n({username:r,password:s,remember:i}).then(function(){return o.push("/home")}).catch(function(e){t.setState({loading:!1}),Q.message.error(e.response.data.message)}))})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=s.a.createElement(T.a,{type:"loading",style:{fontSize:24},spin:!0}),a=this.state.remember;return s.a.createElement(F.a,{spinning:this.state.loading,indicator:t},s.a.createElement("h1",{style:{textAlign:"center"}},"Login"),s.a.createElement(C.a,{onSubmit:this.handleSubmit},s.a.createElement(ie,{getFieldDecorator:e}),s.a.createElement(ae,{getFieldDecorator:e,validator:this.validateToNextPassword}),s.a.createElement(ee.a,null,s.a.createElement("div",{className:ce.a.rememberForgotContainer},s.a.createElement(ne,{getFieldDecorator:e,remember:a,onChange:this.changeRemember}),s.a.createElement(Z.a,{to:"/password-reset"},"Forgot password")),s.a.createElement("div",{className:ce.a.loginRegisterContainer},s.a.createElement(D.a,{className:ce.a.login,type:"primary",htmlType:"submit"},"Log in"),s.a.createElement(Z.a,{to:"/register"},"Register now!")))))}}]),t}(s.a.Component),ue=C.a.create()(Object(K.a)(null,function(e){return Object(c.b)({login:Y},e)})(Object(M.a)(le))),me=a(910),de=a(252),he=a.n(de),pe=function(e){return s.a.createElement("div",{className:he.a.welcome},s.a.createElement(me.a,{className:he.a.card},e.children))};pe.defaultProps={children:s.a.createElement(ue,null)};var fe=pe,ge=a(181),be=a.n(ge),ve=Object(K.a)(null,function(e){return Object(c.b)({logout:G},e)})(function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:be.a.header},s.a.createElement("button",{className:be.a.logout,onClick:e.logout},"Logout")),s.a.createElement("div",{className:be.a.container},s.a.createElement("h1",null,"Homepage")))}),Ee=function(e){var t=e.getFieldDecorator,a=e.initialValue;return s.a.createElement(ee.a,null,t("email",{rules:[{type:"email",message:"The input is not valid Email!"},{required:!0,message:"Please input your Email!"}],initialValue:a})(s.a.createElement($.a,{prefix:s.a.createElement(T.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"})))};Ee.defaultProps={initialValue:null};var we=Ee,ye=function(e){var t=e.getFieldDecorator,a=e.validator,r=e.onBlur;return s.a.createElement(ee.a,null,t("confirm",{rules:[{required:!0,message:"Please confirm your password!"},{validator:a}]})(s.a.createElement($.a,{prefix:s.a.createElement(T.a,{type:"eye",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Confirm password",onBlur:r})))},Oe=a(395),je=a.n(Oe),_e=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(S.a)(this,Object(k.a)(t).call(this,e))).state={confirmDirty:!1,loading:!1},a.handleSubmit=a.handleSubmit.bind(Object(x.a)(Object(x.a)(a))),a.handleConfirmBlur=a.handleConfirmBlur.bind(Object(x.a)(Object(x.a)(a))),a.compareToFirstPassword=a.compareToFirstPassword.bind(Object(x.a)(Object(x.a)(a))),a.validateToNextPassword=a.validateToNextPassword.bind(Object(x.a)(Object(x.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(x.a)(Object(x.a)(a))),a}return Object(P.a)(t,e),Object(_.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props,r=a.register,n=a.form,o=a.history;n.validateFieldsAndScroll(function(e,a){var n=a.email,i=a.username,s=a.password,c=a.confirm;e||(t.setState({loading:!0}),r({email:n,username:i,password:s,password_confirmation:c}).then(function(e){Q.message.success(e.message),t.setState({loading:!1}),o.push("/")}).catch(function(e){t.setState({loading:!1}),Q.message.error(e.message)}))})}},{key:"handleConfirmBlur",value:function(e){var t=e.target.value;this.setState({confirmDirty:this.state.confirmDirty||!!t})}},{key:"compareToFirstPassword",value:function(e,t,a){var r=this.props.form;t&&t!==r.getFieldValue("password")?a("Two passwords that you enter is inconsistent!"):a()}},{key:"validateToNextPassword",value:function(e,t,a){var r=this.props.form;t&&this.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),a()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=s.a.createElement(T.a,{type:"loading",style:{fontSize:24},spin:!0});return s.a.createElement(F.a,{spinning:this.state.loading,indicator:t,delay:150},s.a.createElement("h1",{style:{textAlign:"center"}},"Register"),s.a.createElement(C.a,{onSubmit:this.handleSubmit},s.a.createElement(we,{getFieldDecorator:e}),s.a.createElement(ie,{getFieldDecorator:e}),s.a.createElement(ae,{getFieldDecorator:e,validator:this.validateToNextPassword}),s.a.createElement(ye,{getFieldDecorator:e,validator:this.compareToFirstPassword,onBlur:this.handleConfirmBlur}),s.a.createElement(ee.a,null,s.a.createElement("div",{className:je.a.registerLoginContainer},s.a.createElement(D.a,{type:"primary",htmlType:"submit"},"Register"),s.a.createElement(Z.a,{to:"/"},"Log in")))))}}]),t}(s.a.Component),Se=function(e){return Object(c.b)({register:J},e)},ke=function(){var e=C.a.create()(Object(K.a)(null,Se)(Object(M.a)(_e)));return s.a.createElement(fe,null,s.a.createElement(e,null))},Pe=a(253),xe=a.n(Pe),Te=C.a.Item,Fe=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(S.a)(this,Object(k.a)(t).call(this,e))).state={loading:!1},a.handleSubmit=a.handleSubmit.bind(Object(x.a)(Object(x.a)(a))),a}return Object(P.a)(t,e),Object(_.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props,r=a.form,n=a.resetPassword;r.validateFields(function(e,a){var r=a.email;e||(t.setState({loading:!0}),n({email:r}).then(function(e){t.setState({loading:!1}),Q.message.success(e)}).catch(function(e){t.setState({loading:!1}),Q.message.error(e)}))})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.loading,a=s.a.createElement(T.a,{type:"loading",style:{fontSize:24},spin:!0});return s.a.createElement(F.a,{spinning:t,indicator:a,delay:150},s.a.createElement("h1",{style:{textAlign:"center"}},"Reset password"),s.a.createElement(C.a,{onSubmit:this.handleSubmit},s.a.createElement(we,{getFieldDecorator:e}),s.a.createElement(Te,null,s.a.createElement(D.a,{type:"primary",htmlType:"submit",className:xe.a.submit},"Reset"),s.a.createElement("div",{className:xe.a.loginRegisterContainer},s.a.createElement(Z.a,{to:"/"},"Log in"),s.a.createElement(Z.a,{to:"/register"},"Register")))))}}]),t}(s.a.Component),Ce=function(e){return Object(c.b)({resetPassword:H},e)},De=function(){var e=C.a.create()(Object(K.a)(null,Ce)(Fe));return s.a.createElement(fe,null,s.a.createElement(e,null))},Ne=a(254),Re=a.n(Ne),Ae=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(S.a)(this,Object(k.a)(t).call(this,e))).state={loading:!1},a.handleSubmit=a.handleSubmit.bind(Object(x.a)(Object(x.a)(a))),a.handleConfirmBlur=a.handleConfirmBlur.bind(Object(x.a)(Object(x.a)(a))),a.compareToFirstPassword=a.compareToFirstPassword.bind(Object(x.a)(Object(x.a)(a))),a.validateToNextPassword=a.validateToNextPassword.bind(Object(x.a)(Object(x.a)(a))),a}return Object(P.a)(t,e),Object(_.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props,r=a.form,n=a.updatePassword,o=a.match,i=a.history;r.validateFields(function(e,a){var r=a.password,s=a.confirm;e||(t.setState({loading:!0}),n({email:o.params.email.replace("29gnmLTv686QsnV","@"),token:o.params.token,password_confirmation:s,password:r}).then(function(e){t.setState({loading:!1}),Q.message.success(e),i.push("/")}).catch(function(e){t.setState({loading:!1}),Q.message.error(e.message)}))})}},{key:"handleConfirmBlur",value:function(e){var t=e.target.value;this.setState({confirmDirty:this.state.confirmDirty||!!t})}},{key:"compareToFirstPassword",value:function(e,t,a){var r=this.props.form;t&&t!==r.getFieldValue("password")?a("Two passwords that you enter is inconsistent!"):a()}},{key:"validateToNextPassword",value:function(e,t,a){var r=this.props.form;t&&this.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),a()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=s.a.createElement(T.a,{type:"loading",style:{fontSize:24},spin:!0});return s.a.createElement(F.a,{spinning:this.state.loading,indicator:t,delay:150},s.a.createElement("h1",{style:{textAlign:"center"}},"Reset password"),s.a.createElement(C.a,{onSubmit:this.handleSubmit},s.a.createElement(we,{getFieldDecorator:e,initialValue:this.props.match.params.email.replace("29gnmLTv686QsnV","@")}),s.a.createElement(ae,{getFieldDecorator:e,validator:this.validateToNextPassword}),s.a.createElement(ye,{getFieldDecorator:e,validator:this.compareToFirstPassword,onBlur:this.handleConfirmBlur}),s.a.createElement(ee.a,null,s.a.createElement(D.a,{type:"primary",htmlType:"submit",className:Re.a.submit},"Reset"),s.a.createElement("div",{className:Re.a.loginRegisterContainer},s.a.createElement(Z.a,{to:"/"},"Log in"),s.a.createElement(Z.a,{to:"/register"},"Register")))))}}]),t}(s.a.Component),Ie=function(e){return Object(c.b)({updatePassword:W},e)},Be=[{path:"/",exact:!0,auth:!1,component:fe},{path:"/home",exact:!0,auth:!0,component:ve},{path:"/login",exact:!0,auth:!1,component:fe},{path:"/register",exact:!0,auth:!1,component:ke},{path:"/password-reset",exact:!0,auth:!1,component:De},{path:"/password-update/:token/:email",exact:!0,auth:!1,component:function(e){var t=C.a.create()(Object(K.a)(null,Ie)(Object(M.a)(Ae)));return s.a.createElement(fe,null,s.a.createElement(t,e))}}],Le=a(883),ze=a(396),Ve=Object(K.a)(function(e){return{isAuthenticated:e.auth.isAuthenticated}})(function(e){var t=e.component,a=e.isAuthenticated,r=Object(N.a)(e,["component","isAuthenticated"]);return s.a.createElement(Le.a,Object.assign({},r,{render:function(e){return a?s.a.createElement(ze.a,{to:{pathname:"/home",state:{from:e.location}}}):s.a.createElement("main",null,s.a.createElement(t,e))}}))}),qe=a(907),Xe=Object(K.a)(function(e){return{isAuthenticated:e.auth.isAuthenticated}})(function(e){var t=e.component,a=e.isAuthenticated,r=Object(N.a)(e,["component","isAuthenticated"]);return s.a.createElement(Le.a,Object.assign({},r,{render:function(e){return a?s.a.createElement("main",null,s.a.createElement(t,e)):s.a.createElement(qe.a,{to:{pathname:"/",state:{from:e.location}}})}}))}),Ue=function(){return s.a.createElement(y.a,null,s.a.createElement(O.a,null,Be.map(function(e,t){return e.auth?s.a.createElement(Xe,Object.assign({key:t},e)):s.a.createElement(Ve,Object.assign({key:t},e))})))},Ye=a(163),Ge=a(398),He=a.n(Ge),We=function(){return s.a.createElement("div",{className:He.a.container},s.a.createElement("ul",null,s.a.createElement("li",null),s.a.createElement("li",null),s.a.createElement("li",null),s.a.createElement("li",null),s.a.createElement("li",null)))};Object(o.a)(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.hasOwnProperty("accessToken")){e.next=4;break}return Object(w.render)(s.a.createElement(We,null),document.getElementById("root")),e.next=4,E.dispatch(function(e){return new Promise(function(t,a){X.post("/api/v1/auth/me").then(function(a){var r=a.data;e(I(r.user)),t(r)}).catch(function(e){return a(e)})})}).catch(function(){});case 4:Object(w.render)(s.a.createElement(Ye.a,{store:E},s.a.createElement(Ue,null)),document.getElementById("root"));case 5:case"end":return e.stop()}},e,this)}))(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[405,2,1]]]);
//# sourceMappingURL=main.ae211acf.chunk.js.map